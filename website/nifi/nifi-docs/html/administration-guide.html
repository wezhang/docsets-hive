<!--
                        Licensed to the Apache Software Foundation (ASF) under one or more
                        contributor license agreements.  See the NOTICE file distributed with
                        this work for additional information regarding copyright ownership.
                        The ASF licenses this file to You under the Apache License, Version 2.0
                        (the "License"); you may not use this file except in compliance with
                        the License.  You may obtain a copy of the License at

                        http://www.apache.org/licenses/LICENSE-2.0

                        Unless required by applicable law or agreed to in writing, software
                        distributed under the License is distributed on an "AS IS" BASIS,
                        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                        See the License for the specific language governing permissions and
                        limitations under the License.
                        -->
                        <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Apache NiFi Team">
<title>NiFi System Administrator&#8217;s Guide</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Copyright (C) 2012-2015 Dan Allen, Ryan Waldron and the Asciidoctor Project

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE. */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9);padding-right: 1px;}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>NiFi System Administrator&#8217;s Guide</h1>
<div class="details">
<span id="author" class="author">Apache NiFi Team</span><br>
<span id="email" class="email"><a href="mailto:dev@nifi.apache.org">dev@nifi.apache.org</a></span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="administration-guide.html#system-requirements">System Requirements</a></li>
<li><a href="administration-guide.html#how-to-install-and-start-nifi">How to install and start NiFi</a></li>
<li><a href="administration-guide.html#configuration-best-practices">Configuration Best Practices</a></li>
<li><a href="administration-guide.html#security-configuration">Security Configuration</a></li>
<li><a href="administration-guide.html#user-authentication">User Authentication</a></li>
<li><a href="administration-guide.html#controlling-levels-of-access">Controlling Levels of Access</a></li>
<li><a href="administration-guide.html#clustering">Clustering Configuration</a></li>
<li><a href="administration-guide.html#bootstrap_properties">Bootstrap Properties</a></li>
<li><a href="administration-guide.html#notification_services">Notification Services</a></li>
<li><a href="administration-guide.html#system_properties">System Properties</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="system-requirements"><a class="anchor" href="administration-guide.html#system-requirements"></a>System Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Apache NiFi can run on something as simple as a laptop, but it can also be clustered across many enterprise-class servers. Therefore, the amount of hardware and memory needed will depend on the size and nature of the dataflow involved. The data is stored on disk while NiFi is processing it. So NiFi needs to have sufficient disk space allocated for its various repositories, particularly the content repository, flowfile repository, and provenance repository (see the <a href="administration-guide.html#system_properties">System Properties</a> section for more information about these repositories). NiFi has the following minimum system requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requires Java 7 or newer</p>
</li>
<li>
<p>Supported Operating Systems:</p>
<div class="ulist">
<ul>
<li>
<p>Linux</p>
</li>
<li>
<p>Unix</p>
</li>
<li>
<p>Windows</p>
</li>
<li>
<p>Mac OS X</p>
</li>
</ul>
</div>
</li>
<li>
<p>Supported Web Browsers:</p>
<div class="ulist">
<ul>
<li>
<p>Internet Explorer 9+ (see note below)</p>
</li>
<li>
<p>Mozilla FireFox 24+</p>
</li>
<li>
<p>Google Chrome 36+</p>
</li>
<li>
<p>Safari 8</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that there is a known issue in Internet Explorer (IE) 10 and 11 that can cause problems when moving items on the NiFi graph. If you encounter this problem, we suggest using a browser other than IE. This known issue is described here: <a href="https://connect.microsoft.com/IE/Feedback/Details/1050422" class="bare">https://connect.microsoft.com/IE/Feedback/Details/1050422</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-install-and-start-nifi"><a class="anchor" href="administration-guide.html#how-to-install-and-start-nifi"></a>How to install and start NiFi</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Linux/Unix/OS X</p>
<div class="ulist">
<ul>
<li>
<p>Decompress and untar into desired installation directory</p>
</li>
<li>
<p>Make any desired edits in files found under &lt;installdir&gt;/conf</p>
<div class="ulist">
<ul>
<li>
<p>At a minimum, we recommend editing the <em>nifi.properties</em> file and entering a password for the nifi.sensitive.props.key (see <a href="administration-guide.html#system_properties">System Properties</a> below)</p>
</li>
</ul>
</div>
</li>
<li>
<p>From the &lt;installdir&gt;/bin directory, execute the following commands by typing ./nifi.sh &lt;command&gt;:</p>
<div class="ulist">
<ul>
<li>
<p>start: starts NiFi in the background</p>
</li>
<li>
<p>stop: stops NiFi that is running in the background</p>
</li>
<li>
<p>status: provides the current status of NiFi</p>
</li>
<li>
<p>run: runs NiFi in the foreground and waits for a Ctrl-C to initiate shutdown of NiFi</p>
</li>
<li>
<p>install: installs NiFi as a service that can then be controlled via</p>
<div class="ulist">
<ul>
<li>
<p>service nifi start</p>
</li>
<li>
<p>service nifi stop</p>
</li>
<li>
<p>service nifi status</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Windows</p>
<div class="ulist">
<ul>
<li>
<p>Decompress into the desired installation directory</p>
</li>
<li>
<p>Make any desired edits in the files found under &lt;installdir&gt;/conf</p>
<div class="ulist">
<ul>
<li>
<p>At a minimum, we recommend editing the <em>nifi.properties</em> file and entering a password for the nifi.sensitive.props.key (see <a href="administration-guide.html#system_properties">System Properties</a> below)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Navigate to the &lt;installdir&gt;/bin directory</p>
</li>
<li>
<p>Double-click run-nifi.bat. This runs NiFi in the foreground and waits for a Ctrl-C to initiate shutdown of NiFi</p>
</li>
<li>
<p>Alternatively, to start NiFi in the background, double-click start-nifi.bat</p>
</li>
<li>
<p>To stop NiFi running in the background, double-click stop-nifi.bat</p>
</li>
<li>
<p>To see the current status of NiFi, double-click status-nifi.bat</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>When NiFi first starts up, the following files and directories are created:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>content_repository</p>
</li>
<li>
<p>database_repository</p>
</li>
<li>
<p>flowfile_repository</p>
</li>
<li>
<p>provenance_repository</p>
</li>
<li>
<p>work directory</p>
</li>
<li>
<p>logs directory</p>
</li>
<li>
<p>Within the conf directory, the <em>flow.xml.gz</em> file and the templates directory are created</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See the <a href="administration-guide.html#system_properties">System Properties</a> section of this guide for more information about configuring NiFi repositories and configuration files.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-best-practices"><a class="anchor" href="administration-guide.html#configuration-best-practices"></a>Configuration Best Practices</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are running on Linux, consider these best practices. Typical Linux defaults are not necessarily well tuned for the needs of an IO intensive application like NiFi.  For all of these areas, your distribution&#8217;s requirements may vary.  Use these sections as advice, but
consult your distribution-specific documentation for how best to achieve these recommendations.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Maximum File Handles</dt>
<dd>
<p>NiFi will at any one time potentially have a very large number of file handles open.  Increase the limits by
editing <em>/etc/security/limits.conf</em> to add
something like</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>*  hard  nofile  50000
*  soft  nofile  50000</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Maximum Forked Processes</dt>
<dd>
<p>NiFi may be configured to generate a significant number of threads.  To increase the allowable number edit <em>/etc/security/limits.conf</em></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>*  hard  nproc  10000
*  soft  nproc  10000</pre>
</div>
</div>
<div class="paragraph">
<p>And your distribution may require an edit to /etc/security/limits.d/90-nproc.conf by adding</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*  soft  nproc  10000</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Increase the number of TCP socket ports available</dt>
<dd>
<p>This is particularly important if your flow will be setting up and tearing
down a large number of sockets in small period of time.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo sysctl -w net.ipv4.ip_local_port_range="10000 65000"</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Set how long sockets stay in a TIMED_WAIT state when closed</dt>
<dd>
<p>You don&#8217;t want your sockets to sit and linger too long given that you want to be
able to quickly setup and teardown new sockets.  It is a good idea to read more about
it but to adjust do something like</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo sysctl -w net.ipv4.netfilter.ip_conntrack_tcp_timeout_time_wait="1"</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Tell Linux you never want NiFi to swap</dt>
<dd>
<p>Swapping is fantastic for some applications.  It isn&#8217;t good for something like
NiFi that always wants to be running.  To tell Linux you&#8217;d like swapping off you
can edit <em>/etc/sysctl.conf</em> to add the following line</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre>vm.swappiness = 0</pre>
</div>
</div>
<div class="paragraph">
<p>For the partitions handling the various NiFi repos turn off things like <em>atime</em>.
Doing so can cause a surprising bump in throughput.  Edit the <em>/etc/fstab</em> file
and for the partition(s) of interest add the <em>noatime</em> option.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security-configuration"><a class="anchor" href="administration-guide.html#security-configuration"></a>Security Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NiFi provides several different configuration options for security purposes. The most important properties are those under the
"security properties" heading in the <em>nifi.properties</em> file. In order to run securely, the following properties must be set:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.anonymous.authorities</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the roles that should be granted to users that connect over HTTPS anonymously. All users can make
                                use of anonymous access, however if they have been granted a particular level of access by an administrator
                                it will take precedence if they access NiFi using a client certificate or once they have logged in.</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.keystore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filename of the Keystore that contains the server&#8217;s private key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.keystoreType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of Keystore. Must be either <code>PKCS12</code> or <code>JKS</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.keystorePasswd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the Keystore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.keyPasswd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the certificate in the Keystore. If not set, the value of <code>nifi.security.keystorePasswd</code> will be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.truststore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filename of the Truststore that will be used to authorize those connecting to NiFi. If not set, all who
                            attempt to connect will be provided access as the <em>Anonymous</em> user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.truststoreType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of the Truststore. Must be either <code>PKCS12</code> or <code>JKS</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.truststorePasswd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the Truststore.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nifi.security.needClientAuth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether or not connecting clients must authenticate themselves. Specifically this property is used
                                by the NiFi cluster protocol. If the Truststore properties are not set, this must be <code>false</code>. Otherwise, a value
                                of <code>true</code> indicates that nodes in the cluster will be authenticated and must have certificates that are trusted
                                by the Truststores.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Once the above properties have been configured, we can enable the User Interface to be accessed over HTTPS instead of HTTP. This is accomplished
by setting the <code>nifi.web.https.host</code> and <code>nifi.web.https.port</code> properties. The <code>nifi.web.https.host</code> property indicates which hostname the server
should run on. This allows admins to configure the application to run only on specific network interfaces. If it is desired that the HTTPS interface
be accessible from all network interfaces, a value of <code>0.0.0.0</code> should be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is important when enabling HTTPS that the <code>nifi.web.http.port</code> property be unset.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similar to <code>nifi.security.needClientAuth</code>, the web server can be configured to require certificate based client authentication for users accessing
the User Interface. In order to do this it must be configured to not support username/password authentication (see below) and not grant access to
anonymous users (see <code>nifi.security.anonymous.authorities</code> above). Either of these options will configure the web server to WANT certificate based client
authentication. This will allow it to support users with certificates and those without that may be logging in with their credentials or those accessing
anonymously. If username/password authentication and anonymous access are not configured, the web server will REQUIRE certificate based client authentication.</p>
</div>
<div class="paragraph">
<p>Now that the User Interface has been secured, we can easily secure Site-to-Site connections and inner-cluster communications, as well. This is
accomplished by setting the <code>nifi.remote.input.secure</code> and <code>nifi.cluster.protocol.is.secure</code> properties, respectively, to <code>true</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-authentication"><a class="anchor" href="administration-guide.html#user-authentication"></a>User Authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>NiFi supports user authentication via client certificates or via username/password. Username/password authentication is performed by a <em>Login Identity
Provider</em>. The Login Identity Provider is a pluggable mechanism for authenticating users via their username/password. Which Login Identity Provider
to use is configured in two properties in the <em>nifi.properties</em> file.</p>
</div>
<div class="paragraph">
<p>The <code>nifi.login.identity.provider.configuration.file</code> property specifies the configuration file for Login Identity Providers.
The <code>nifi.security.user.login.identity.provider</code> property indicates which of the configured Login Identity Provider should be
used. If this property is not configured, NiFi will not support username/password authentication and will require client
certificates for authenticating users over HTTPS. By default, this property is not configured meaning that username/password must be
explicity enabled.</p>
</div>
<div class="paragraph">
<p>NiFi does not perform user authentication over HTTP. Using HTTP all users will be granted all roles.</p>
</div>
<div class="paragraph">
<p>Below is an example and description of configuring a Login Identity Provider that integrates with a Directory Server to authenticate users.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;provider&gt;
    &lt;identifier&gt;ldap-provider&lt;/identifier&gt;
    &lt;class&gt;org.apache.nifi.ldap.LdapProvider&lt;/class&gt;
    &lt;property name="Authentication Strategy"&gt;START_TLS&lt;/property&gt;

    &lt;property name="Manager DN"&gt;&lt;/property&gt;
    &lt;property name="Manager Password"&gt;&lt;/property&gt;

    &lt;property name="TLS - Keystore"&gt;&lt;/property&gt;
    &lt;property name="TLS - Keystore Password"&gt;&lt;/property&gt;
    &lt;property name="TLS - Keystore Type"&gt;&lt;/property&gt;
    &lt;property name="TLS - Truststore"&gt;&lt;/property&gt;
    &lt;property name="TLS - Truststore Password"&gt;&lt;/property&gt;
    &lt;property name="TLS - Truststore Type"&gt;&lt;/property&gt;
    &lt;property name="TLS - Client Auth"&gt;&lt;/property&gt;
    &lt;property name="TLS - Protocol"&gt;&lt;/property&gt;
    &lt;property name="TLS - Shutdown Gracefully"&gt;&lt;/property&gt;

    &lt;property name="Referral Strategy"&gt;FOLLOW&lt;/property&gt;
    &lt;property name="Connect Timeout"&gt;10 secs&lt;/property&gt;
    &lt;property name="Read Timeout"&gt;10 secs&lt;/property&gt;

    &lt;property name="Url"&gt;&lt;/property&gt;
    &lt;property name="User Search Base"&gt;&lt;/property&gt;
    &lt;property name="User Search Filter"&gt;&lt;/property&gt;

    &lt;property name="Authentication Expiration"&gt;12 hours&lt;/property&gt;
&lt;/provider&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>With this configuration, username/password authentication can be enabled by referencing this provider in <em>nifi.properties</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>nifi.security.user.login.identity.provider=ldap-provider</pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Authentication Expiration</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The duration of how long the user authentication is valid for. If the user never logs out, they will be required to log back in following this duration.</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Authentication Strategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How the connection to the LDAP server is authenticated. Possible values are ANONYMOUS, SIMPLE, or START_TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Manager DN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The DN of the manager that is used to bind to the LDAP server to search for users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Manager Password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password of the manager that is used to bind to the LDAP server to search for users.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Keystore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Keystore that is used when connecting to LDAP using START_TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Keystore Password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the Keystore that is used when connecting to LDAP using START_TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Keystore Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the Keystore that is used when connecting to LDAP using START_TLS (i.e. JKS or PKCS12).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Truststore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the Truststore that is used when connecting to LDAP using START_TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Truststore Password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the Truststore that is used when connecting to LDAP using START_TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Truststore Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the Truststore that is used when connecting to LDAP using START_TLS (i.e. JKS or PKCS12).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Client Auth</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client authentication policy when connecting to LDAP using START_TLS. Possible values are REQUIRED, WANT, NONE.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Protocol</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protocol to use when connecting to LDAP using START_TLS. (i.e. TLS, TLSv1.1, TLSv1.2, etc).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TLS - Shutdown Gracefully</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies whether the TLS should be shut down gracefully before the target context is closed. Defaults to false.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Referral Strategy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Strategy for handling referrals. Possible values are FOLLOW, IGNORE, THROW.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Connect Timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration of connect timeout. (i.e. 10 secs).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Read Timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration of read timeout. (i.e. 10 secs).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url of the LDAP servier (i.e. ldap://&lt;hostname&gt;:&lt;port&gt;).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>User Search Base</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Base DN for searching for users (i.e. CN=Users,DC=example,DC=com).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>User Search Filter</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter for searching for users against the <em>User Search Base</em>. (i.e. sAMAccountName={0}). The user specified name is inserted into <em>{0}</em>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="controlling-levels-of-access"><a class="anchor" href="administration-guide.html#controlling-levels-of-access"></a>Controlling Levels of Access</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Once NiFi is configured to run securely and an authentication mechanism is configured, it is necessary
to configure who will have access to the system and what types of access those people will have.
NiFi controls this through the user of an <em>Authority Provider.</em> The Authority Provider is a pluggable
mechanism for providing authorizations to different users. Which Authority Provider to use is configured
using two properties in the <em>nifi.properties</em> file.</p>
</div>
<div class="paragraph">
<p>The <code>nifi.authority.provider.configuration.file</code> property specifies the configuration file for Authority Providers.
The <code>nifi.security.user.authority.provider</code> property indicates which of the configured Authority Providers should be
used.</p>
</div>
<div class="paragraph">
<p>By default, the <code>file-provider</code> Authority Provider is selected and is configured to use the permissions granted in
the <em>authorized-users.xml</em> file. This is typically sufficient for instances of NiFi that are run in "standalone" mode.
If the NiFi instance is configured to run in a cluster, the node will typically use the <code>cluster-node-provider</code>
Provider and the Cluster Manager will typically use the <code>cluster-ncm-provider</code> Provider. Both of these Providers
have a default configuration in the <em>authority-providers.xml</em> file but are commented out.</p>
</div>
<div class="paragraph">
<p>When using the <code>cluster-node-provider</code> Provider, all of the authorization is provided by the Cluster Manager. In this
way, the configuration only has to be maintained in one place and will be consistent across the entire cluster.</p>
</div>
<div class="paragraph">
<p>When configuring the Cluster Manager or a standalone node, it is necessary to manually designate an ADMIN user
in the <em>authorized-users.xml</em> file, which is located in the root installation&#8217;s conf directory.
After this ADMIN user has been added, s/he may grant access
to other users, systems, and other instances of NiFi, through the User Interface (UI) without having to manually edit the <em>authorized-users.xml</em>
file. If you are the administrator, you would add yourself as the ADMIN user in this file.</p>
</div>
<div class="paragraph">
<p>Open the <em>authorized-users.xml</em> file in a text editor. You will notice that it includes a template
to guide you, with example entries that are commented out.</p>
</div>
<div class="paragraph">
<p>It is only necessary to manually add one user, the ADMIN user, to this file.
So, at a minimum, the following example entry should be included and contain the user Distinguished Name (DN)
in place of "user dn - read only and admin":</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;users&gt;
    &lt;user dn="[user dn - read only and admin]"&gt;
        &lt;role name="ROLE_ADMIN"/&gt;
    &lt;/user&gt;
&lt;/users&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example entry using the name John Smith:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;users&gt;
    &lt;user dn="cn=John Smith,ou=people,dc=example,dc=com"&gt;
        &lt;role name="ROLE_ADMIN"/&gt;
    &lt;/user&gt;
&lt;/users&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After the <em>authorized-users.xml</em> file has been edited and saved, restart NiFi.
Once the application starts, the ADMIN user is
able to access the UI at the HTTPS URL that is configured in the <em>nifi.properties</em> file.</p>
</div>
<div class="paragraph">
<p>From the UI, click on the Users icon ( <span class="image"><img src="images/iconUsers.png" alt="Users" width="32"></span> ) in the
Management Toolbar (upper-right corner of the UI), and the User Management Page opens.</p>
</div>
<div class="paragraph">
<p>The ADMIN user should be listed. Click on the pencil icon to see this user&#8217;s role(s). You may edit the
roles by selecting the appropriate checkboxes.</p>
</div>
<div class="paragraph">
<p>The following roles are available in NiFi:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Role Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tfoot>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Proxy Role is assigned to a system in order to grant that system permission to make requests
          on behalf of a user. For instance, if an HTTP proxy service is used to gain access to the system,
          the certificate being used by that service can be given the Proxy Role.</p></td>
</tr>
</tfoot>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator is able to configure thread pool sizes and user accounts as well as
                  purge the dataflow change history.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Flow Manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data Flow Manager is given the ability to manipulate the dataflow. S/he is able to
                      add, remove, and manipulate components on the graph; add, remove, and manipulate
                      Controller Services and Reporting Tasks; create and manage templates;
                      view statistics; and view the bulletin board.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read Only</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users with Read Only access are able to view the dataflow but are unable to change anything.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provenance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Users with Provenance access are able to query the Data Provenance repository and view
               the lineage of data. Additionally, this role provides the ability to view or download
               the content of a FlowFile from a Provenance event (assuming that the content is still
               available in the Content Repository and that the Authority Provider also grants access).
               This access is not provided to users with Read Only
               (unless the user has both Read Only and Provenance roles) because the information provided
               to users with this role can potentially be very sensitive in nature, as all FlowFile attributes
               and data are exposed. In order to Replay a Provenance event, a user is required to have both
               the Provenance role as well as the Data Flow Manager role.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NiFi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The NiFi Role is intended to be assigned to machines that will interact with an instance of NiFi
         via Site-to-Site. This role provides the ability to send data to or retrieve data from Root
         Group Ports (but only those that they are given permissions to interact with - see the User Guide
         for more information on providing access to specific Ports) as well as obtain information about
         which Ports exist. Note that this role allows the client to know only about the Ports that it
         has permissions to interact with.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When users want access to the NiFi UI, they navigate to the configured URL and are
prompted to request access. When someone has requested access, the ADMIN user sees a star
on the Users icon in the Management Toolbar, alerting the ADMIN to the fact that a request is
pending. Upon opening the User Management Page, the pending request is visible, and the ADMIN
can grant access and click on the pencil icon to set the user&#8217;s roles appropriately.</p>
</div>
<div class="paragraph">
<p>The ADMIN may also select multiple users and add them to a "Group". Hold down the Shift key and select
multiple users, then click the <code>Group</code> button in the upper-right corner of the User Management Page.
Then, provide a name for the group.</p>
</div>
<div class="paragraph">
<p>The group feature is especially useful when a remote NiFi cluster is connecting to this NiFi using
a Remote Process Group. In that scenario, all the nodes
in the remote cluster can be included in the same group. When the ADMIN wants to grant port access to the remote
cluster, s/he can grant it to the group and avoid having to grant it individually to each node in the cluster.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="clustering"><a class="anchor" href="administration-guide.html#clustering"></a>Clustering Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides a quick overview of NiFi Clustering and instructions on how to set up a basic cluster. In the future, we hope to provide supplemental documentation that covers the NiFi Cluster Architecture in depth.</p>
</div>
<div class="paragraph">
<p>The design of NiFi clustering is a simple master/slave model where there is a master and one or more slaves.
While the model is that of master and slave, if the master dies, the slaves are all instructed to continue operating
as they were to ensure the dataflow remains live. The absence of the master simply means new slaves cannot join the
cluster and cluster flow changes cannot occur until the master is restored. In NiFi clustering, we call the master
the NiFi Cluster Manager (NCM), and the slaves are called Nodes. See a full description of each in the Terminology section below.</p>
</div>
<div class="paragraph">
<p><strong>Why Cluster?</strong><br></p>
</div>
<div class="paragraph">
<p>NiFi Administrators or Dataflow Managers (DFMs) may find that using one instance of NiFi on a single server is not enough to process the amount of data they have. So, one solution is to run the same dataflow on multiple NiFi servers. However, this creates a management problem, because each time DFMs want to change or update the dataflow, they must make those changes on each server and then monitor each server individually. By clustering the NiFi servers, it&#8217;s possible to have that increased processing capability along with a single interface through which to make dataflow changes and monitor the dataflow. Clustering allows the DFM to make each change only once, and that change is then replicated to all the nodes of the cluster. Through the single interface, the DFM may also monitor the health and status of all the nodes.</p>
</div>
<div class="paragraph">
<p>NiFi Clustering is unique and has its own terminology. It&#8217;s important to understand the following terms before setting up a cluster.</p>
</div>
<div id="terminology" class="paragraph">
<p><strong>Terminology</strong><br></p>
</div>
<div class="paragraph">
<p><strong>NiFi Cluster Manager</strong>: A NiFi Cluster Manager (NCM) is an instance of NiFi that provides the sole management point for the cluster. It communicates dataflow changes to the nodes and receives health and status information from the nodes. It also ensures that a uniform dataflow is maintained across the cluster.  When DFMs manage a dataflow in a cluster, they do so through the User Interface of the NCM (i.e., via the URL of the NCM&#8217;s User Interface). Fundamentally, the NCM keeps the state of the cluster consistent.</p>
</div>
<div class="paragraph">
<p><strong>Nodes</strong>: Each cluster is made up of the NCM and one or more nodes. The nodes do the actual data processing. (The NCM does not process any data; all data runs through the nodes.)  While nodes are connected to a cluster, the DFM may not access the User Interface for any of the individual nodes. The User Interface of a node may only be accessed if the node is manually removed from the cluster.</p>
</div>
<div class="paragraph">
<p><strong>Primary Node</strong>: Every cluster has one Primary Node. On this node, it is possible to run "Isolated Processors" (see below). By default, the NCM will elect the first node that connects to the cluster as the Primary Node; however, the DFM may select a new node as the Primary Node in the Cluster Management page of the User Interface if desired. If the cluster restarts, the NCM will "remember" which node was the Primary Node and wait for that node to re-connect before allowing the DFM to make any changes to the dataflow. The ADMIN may adjust how long the NCM waits for the Primary Node to reconnect by adjusting the property <em>nifi.cluster.manager.safemode.duration</em> in the <em>nifi.properties</em> file, which is discussed in the <a href="administration-guide.html#system_properties">System Properties</a> section of this document.</p>
</div>
<div class="paragraph">
<p><strong>Isolated Processors</strong>: In a NiFi cluster, the same dataflow runs on all the nodes. As a result, every component in the flow runs on every node. However, there may be cases when the DFM would not want every processor to run on every node. The most common case is when using a processor that communicates with an external service using a protocol that does not scale well. For example, the GetSFTP processor pulls from a remote directory, and if the GetSFTP on every node in the cluster tries simultaneously to pull from the same remote directory, there could be race conditions. Therefore, the DFM could configure the GetSFTP on the Primary Node to run in isolation, meaning that it only runs on that node. It could pull in data and -with the proper dataflow configuration- load-balance it across the rest of the nodes in the cluster. Note that while this feature exists, it is also very common to simply use a standalone NiFi instance to pull data and feed it to the cluster. It just depends on the resources available and how the Administrator decides to configure the cluster.</p>
</div>
<div class="paragraph">
<p><strong>Heartbeats</strong>: The nodes communicate their health and status to the NCM via "heartbeats", which let the NCM know they are still connected to the cluster and working properly. By default, the nodes emit heartbeats to the NCM every 5 seconds, and if the NCM does not receive a heartbeat from a node within 45 seconds, it disconnects the node due to "lack of heartbeat". (The 5-second and 45-second settings are configurable in the <em>nifi.properties</em> file. See the <a href="administration-guide.html#system_properties">System Properties</a> section of this document for more information.) The reason that the NCM disconnects the node is because the NCM needs to ensure that every node in the cluster is in sync, and if a node is not heard from regularly, the NCM cannot be sure it is still in sync with the rest of the cluster. If, after 45 seconds, the node does send a new heartbeat, the NCM will automatically reconnect the node to the cluster. Both the disconnection due to lack of heartbeat and the reconnection once a heartbeat is received are reported to the DFM in the NCM&#8217;s User Interface.</p>
</div>
<div class="paragraph">
<p><strong>Communication within the Cluster</strong><br></p>
</div>
<div class="paragraph">
<p>As noted, the nodes communicate with the NCM via heartbeats. The communication that allows the nodes to find the NCM may be set up as multicast or unicast; this is configured in the <em>nifi.properties</em> file (See <a href="administration-guide.html#system_properties">System Properties</a> ). By default, unicast is used. It is important to note that the nodes in a NiFi cluster are not aware of each other. They only communicate with the NCM. Therefore, if one of the nodes goes down, the other nodes in the cluster will not automatically pick up the load of the missing node. It is possible for the DFM to configure the dataflow for failover contingencies; however, this is dependent on the dataflow design and does not happen automatically.</p>
</div>
<div class="paragraph">
<p>When the DFM makes changes to the dataflow, the NCM communicates those changes to the nodes and waits for each node to respond, indicating that it has made the change on its local flow. If the DFM wants to make another change, the NCM will only allow this to happen once all the nodes have acknowledged that they&#8217;ve implemented the last change. This is a safeguard to ensure that all the nodes in the cluster have the correct and up-to-date flow.</p>
</div>
<div class="paragraph">
<p><strong>Dealing with Disconnected Nodes</strong><br></p>
</div>
<div class="paragraph">
<p>A DFM may manually disconnect a node from the cluster. But if a node becomes disconnected for any other reason (such as due to lack of heartbeat), the NCM will show a bulletin on the User Interface, and the DFM will not be able to make any changes to the dataflow until the issue of the disconnected node is resolved. The DFM or the Administrator will need to troubleshoot the issue with the node and resolve it before any new changes may be made to the dataflow. However, it is worth noting that just because a node is disconnected does not mean that it is not working; it just means that the NCM cannot communicate with the node.</p>
</div>
<div class="paragraph">
<p><strong>Basic Cluster Setup</strong><br></p>
</div>
<div class="paragraph">
<p>This section describes the setup for a simple two-node, non-secure, unicast cluster comprised of three instances of NiFi:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The NCM</p>
</li>
<li>
<p>Node 1</p>
</li>
<li>
<p>Node 2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Administrators may install each instance on a separate server; however, it is also perfectly fine to install the NCM and one of the nodes on the same server, as the NCM is very lightweight. Just keep in mind that the ports assigned to each instance must not collide if the NCM and one of the nodes share the same server.</p>
</div>
<div class="paragraph">
<p>For each instance, certain properties in the <em>nifi.properties</em> file will need to be updated. In particular, the Web and Clustering properties should be evaluated for your situation and adjusted accordingly. All the properties are described in the <a href="administration-guide.html#system_properties">System Properties</a> section of this guide; however, in this section, we will focus on the minimum properties that must be set for a simple cluster.</p>
</div>
<div class="paragraph">
<p>For all three instances, the Cluster Common Properties can be left with the default settings. Note, however, that if you change these settings, they must be set the same on every instance in the cluster (NCM and nodes).</p>
</div>
<div class="paragraph">
<p>For the NCM, the minimum properties to configure are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Under the Web Properties, set either the http or https port that you want the NCM to run on. If the NCM and one of the nodes are on the same server, make sure this port is different from the web port used by the node.</p>
</li>
<li>
<p>Under the Cluster Manager Properties, set the following:</p>
<div class="ulist">
<ul>
<li>
<p>nifi.cluster.is.manager - Set this to <em>true</em>.</p>
</li>
<li>
<p>nifi.cluster.manager.protocol.port - Set this to an open port that is higher than 1024 (anything lower requires root). Take note of this setting, as you will need to reference it when you set up the nodes.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For Node 1, the minimum properties to configure are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Under the Web Properties, set either the http or https port that you want Node 1 to run on. If the NCM is running on the same server, choose a different web port for Node 1. Also, consider whether you need to set the http or https host property.</p>
</li>
<li>
<p>Under Cluster Node Properties, set the following:</p>
<div class="ulist">
<ul>
<li>
<p>nifi.cluster.is.node - Set this to <em>true</em>.</p>
</li>
<li>
<p>nifi.cluster.node.address - Set this to the fully qualified hostname of the node. If left blank, it defaults to "localhost".</p>
</li>
<li>
<p>nifi.cluster.node.protocol.port - Set this to an open port that is higher than 1024 (anything lower requires root). If Node 1 and the NCM are on the same server, make sure this port is different from the nifi.cluster.manager.protocol.port.</p>
</li>
<li>
<p>nifi.cluster.node.unicast.manager.address - Set this to the NCM&#8217;s fully qualified hostname.</p>
</li>
<li>
<p>nifi.cluster.node.unicast.manager.protocol.port - Set this to exactly the same port that was set on the NCM for the property nifi.cluster.manager.protocol.port.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For Node 2, the minimum properties to configure are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Under the Web Properties, set either the http or https port that you want Node 2 to run on. Also, consider whether you need to set the http or https host property.</p>
</li>
<li>
<p>Under the Cluster Node Properties, set the following:</p>
<div class="ulist">
<ul>
<li>
<p>nifi.cluster.is.node - Set this to <em>true</em>.</p>
</li>
<li>
<p>nifi.cluster.node.address - Set this to the fully qualified hostname of the node. If left blank, it defaults to "localhost".</p>
</li>
<li>
<p>nifi.cluster.node.protocol.port - Set this to an open port that is higher than 1024 (anything lower requires root).</p>
</li>
<li>
<p>nifi.cluster.node.unicast.manager.address - Set this to the NCM&#8217;s fully qualified hostname.</p>
</li>
<li>
<p>nifi.cluster.node.unicast.manager.protocol.port - Set this to exactly the same port that was set on the NCM for the property nifi.cluster.manager.protocol.port.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now, it is possible to start up the cluster. Technically, it does not matter which instance starts up first. However, you could start the NCM first, then Node 1 and then Node 2. Since the first node that connects is automatically elected as the Primary Node, this sequence should create a cluster where Node 1 is the Primary Node. Navigate to the URL for the NCM in your web browser, and the User Interface should look similar to the following:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/ncm.png" alt="NCM User Interface" width="940"></span></p>
</div>
<div class="paragraph">
<p><strong>Troubleshooting</strong></p>
</div>
<div class="paragraph">
<p>If you encounter issues and your cluster does not work as described, investigate the nifi.app log and nifi.user log on both the NCM and the nodes. If needed, you can change the logging level to DEBUG by editing the conf/logback.xml file. Specifically, set the level="DEBUG" in the following line (instead of "INFO"):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    &lt;logger name="org.apache.nifi.web.api.config" level="INFO"
additivity="false"&gt;
        &lt;appender-ref ref="USER_FILE"/&gt;
    &lt;/logger&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bootstrap_properties"><a class="anchor" href="administration-guide.html#bootstrap_properties"></a>Bootstrap Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>bootstrap.conf</em> file in the <em>conf</em> directory allows users to configure settings for how NiFi should be started.
This includes parameters, such as the size of the Java Heap, what Java command to run, and Java System Properties.</p>
</div>
<div class="paragraph">
<p>Here, we will address the different properties that are made available in the file. Any changes to this file will
take effect only after NiFi has been stopped and restarted.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the fully qualified java command to run. By default, it is simply <code>java</code> but could be changed to an absolute path or a reference an environment variable, such as <code>$JAVA_HOME/bin/java</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">run.as</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username to run NiFi as. For instance, if NiFi should be run as the <em>nifi</em> user, setting this value to <em>nifi</em> will cause the NiFi Process to be run as the <em>nifi</em> user.
        This property is ignored on Windows. For Linux, the specified user may require sudo permissions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">lib.dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>lib</em> directory to use for NiFi. By default, this is set to <code>./lib</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conf.dir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <em>conf</em> directory to use for NiFi. By default, this is set to <code>./conf</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">graceful.shutdown.seconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When NiFi is instructed to shutdown, the Bootstrap will wait this number of seconds for the process to shutdown cleanly. At this amount of time,
                           if the service is still running, the Bootstrap will "kill" the process, or terminate it abruptly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.arg.N</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any number of JVM arguments can be passed to the NiFi JVM when the process is started. These arguments are defined by adding properties to <em>bootstrap.conf</em> that
            begin with <code>java.arg.</code>. The rest of the property name is not relevant, other than to different property names, and will be ignored. The default includes
            properties for minimum and maximum Java Heap size, the garbage collector to use, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">notification.services.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When NiFi is started, or stopped, or when the Bootstrap detects that NiFi has died, the Bootstrap is able to send notifications of these events
                            to interested parties. This is configured by specifying an XML file that defines which notification services can be used. More about this
                            file can be found in the <a href="administration-guide.html#notification_services">Notification Services</a> section.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">notification.max.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a notification service is configured but is unable to perform its function, it will try again up to a maximum number of attempts. This property
                           configures what that maximum number of attempts is. The default is <code>5</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.start.notification.services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property is a comma-separated list of Notification Service identifiers that correspond to the Notification Services
                                  defined in the <code>notification.services.file</code> property. The services with the specified identifiers will be used to notify their
                                  configured recipients whenever NiFi is started.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.stop.notification.services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property is a comma-separated list of Notification Service identifiers that correspond to the Notification Services
                                 defined in the <code>notification.services.file</code> property. The services with the specified identifiers will be used to notify their
                                 configured recipients whenever NiFi is stopped.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.died.notification.services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property is a comma-separated list of Notification Service identifiers that correspond to the Notification Services
                                 defined in the <code>notification.services.file</code> property. The services with the specified identifiers will be used to notify their
                                 configured recipients if the bootstrap determines that NiFi has unexpectedly died.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="notification_services"><a class="anchor" href="administration-guide.html#notification_services"></a>Notification Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When the NiFi bootstrap starts or stops NiFi, or detects that it has died unexpectedly, it is able to notify configured recipients. At this point
(version 0.3.0 of Apache NiFi), the only mechanism supplied is to send an e-mail notification. The notification services configuration file, however,
is a configurable XML file so that as new notification capabilities are developed, they will be configured similarly.</p>
</div>
<div class="paragraph">
<p>The default location of the XML file is <em>conf/bootstrap-notification-services.xml</em>, but this value can be changed in the <em>conf/bootstrap.conf</em> file.</p>
</div>
<div class="paragraph">
<p>The syntax of the XML file is as follows:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;services&gt;
    &lt;!-- any number of service elements can be defined. --&gt;
    &lt;service&gt;
        &lt;id&gt;some-identifier&lt;/id&gt;
        &lt;!-- The fully-qualified class name of the Notification Service. --&gt;
        &lt;class&gt;org.apache.nifi.bootstrap.notification.email.EmailNotificationService&lt;/class&gt;

        &lt;!-- Any number of properties can be set using this syntax.
             The properties available depend on the Notification Service. --&gt;
        &lt;property name="Property Name 1"&gt;Property Value&lt;/property&gt;
        &lt;property name="Another Property Name"&gt;Property Value 2&lt;/property&gt;
    &lt;/service&gt;
&lt;/services&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Once the desired services have been configured, they can then be referenced in the <em>bootstrap.conf</em> file.
Currently, the only implementation is the <code>org.apache.nifi.bootstrap.notification.email.EmailNotificationService</code> implementation.
It has the following properties available:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Required</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Hostname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostname of the SMTP Server that is used to send Email Notifications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Port used for SMTP communications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Username</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for the SMTP account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Password</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for the SMTP account</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Auth</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag indicating whether authentication should be used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP TLS</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag indicating whether TLS should be enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP Socket Factory</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javax.net.ssl.SSLSocketFactory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP X-Mailer Header</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">X-Mailer used in the header of the outgoing email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Content Type</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mime Type used to interpret the contents of the email, such as text/plain or text/html</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">From</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the Email address to use as the sender. Otherwise, a "friendly name" can be used as the From address, but the value
           must be enclosed in double-quotes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">To</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The recipients to include in the To-Line of the email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CC</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The recipients to include in the CC-Line of the email</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BCC</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The recipients to include in the BCC-Line of the email</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In addition to the properties above that are marked as required, at least one of the <code>To</code>, <code>CC</code>, or <code>BCC</code> properties
must be set.</p>
</div>
<div class="paragraph">
<p>A complete example of configuring the Email service would look like the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>     &lt;service&gt;
        &lt;id&gt;email-notification&lt;/id&gt;
        &lt;class&gt;org.apache.nifi.bootstrap.notification.email.EmailNotificationService&lt;/class&gt;
        &lt;property name="SMTP Hostname"&gt;smtp.gmail.com&lt;/property&gt;
        &lt;property name="SMTP Port"&gt;587&lt;/property&gt;
        &lt;property name="SMTP Username"&gt;username@gmail.com&lt;/property&gt;
        &lt;property name="SMTP Password"&gt;super-secret-password&lt;/property&gt;
        &lt;property name="SMTP TLS"&gt;true&lt;/property&gt;
        &lt;property name="From"&gt;"NiFi Service Notifier"&lt;/property&gt;
        &lt;property name="To"&gt;username@gmail.com&lt;/property&gt;
     &lt;/service&gt;</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="system_properties"><a class="anchor" href="administration-guide.html#system_properties"></a>System Properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <em>nifi.properties</em> file in the <em>conf</em> directory is the main configuration file for controlling how NiFi runs. This section provides an overview of the properties in this file and includes some notes on how to configure it in a way that will make upgrading easier. <strong>After making changes to this file, restart NiFi in order
for the changes to take effect.</strong></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The contents of this file are relatively stable but do change from time to time. It is always a good idea to
review this file when upgrading and pay attention for any changes. Consider configuring items
below marked with an asterisk (*) in such a way that upgrading will be easier. For details, see a full discussion on upgrading
at the end of this section. Note that values for periods of time and data sizes must include the unit of measure,
for example "10 sec" or "10 MB", not simply "10".
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Core Properties</strong><br></p>
</div>
<div class="paragraph">
<p>The first section of the <em>nifi.properties</em> file is for the Core Properties. These properties apply to the core framework as a whole.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version number of the current release. If upgrading but reusing this file, be sure to update this value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flow.configuration.file*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the flow configuration file (i.e., the file that contains what is currently displayed on the NiFi graph). The default value is ./conf/flow.xml.gz.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flow.configuration.archive.dir*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the archive directory where backup copies of the flow.xml are saved. The default value is ./conf/archive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowcontroller.autoResumeState</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether -upon restart- the components on the NiFi graph should return to their last state. The default value is <em>true</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowcontroller.graceful.shutdown.period</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the shutdown period. The default value is 10 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowservice.writedelay.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When many changes are made to the flow.xml, this property specifies how long to wait before writing out the changes, so as to batch the changes into a single write. The default value is 500 ms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.administrative.yield.duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a component allows an unexpected exception to escape, it is considered a bug. As a result, the framework will pause (or administratively yield) the component for this amount of time. This is done so that the component does not use up massive amounts of system resources, since it is known to have problems in the existing state. The default value is 30 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.bored.yield.duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When a component has no work to do (i.e., is "bored"), this is the amount of time it will wait before checking to see if it has new data to work on. This way, it does not use up CPU resources by checking for new work too often. When setting this property, be aware that it could add extra latency for components that do not constantly have work to do, as once they go into this "bored" state, they will wait this amount of time before checking for more work. The default value is 10 millis.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.authority.provider.configuration.file*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the location of the file that specifies how user access is authorized. The default value is ./conf/authority-providers.xml.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.login.identity.provider.configuration.file*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the location of the file that specifies how username/password authentication is performed. This file is
only consider if <code>nifi.security.user.login.identity.provider</code> configured with a provider identifier. The default value is ./conf/login-identity-providers.xml.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.templates.directory*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the location of the directory where flow templates are saved. The default value is ./conf/templates.l</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.ui.banner.text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is banner text that may be configured to display at the top of the User Interface. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.ui.autorefresh.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval at which the User Interface auto-refreshes. The default value is 30 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.nar.library.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the nar library. The default value is ./lib and probably should be left as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.nar.working.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the nar working directory. The default value is ./work/nar and probably should be left as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.documentation.working.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The documentation working directory. The default value is ./work/docs/components and probably should be left as is.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>H2 Settings</strong><br></p>
</div>
<div class="paragraph">
<p>The H2 Settings section defines the settings for the H2 database, which keeps track of user access and flow controller history.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.database.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the H2 database directory. The default value is ./database_repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.h2.url.append</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This property specifies additional arguments to add to the connection string for the H2 database. The default value should be used and should not be changed. It is: ;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>FlowFile Repository</strong><br></p>
</div>
<div class="paragraph">
<p>The FlowFile repository keeps track of the attributes and current state of each FlowFile in the system. By default,
this repository is installed in the same root installation directory as all the other repositories; however, it is advisable
to configure it on a separate drive if available.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowfile.repository.implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The FlowFile Repository implementation. The default value is org.apache.nifi.controller.repository.WriteAheadFlowFileRepository and should not be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowfile.repository.directory*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the FlowFile Repository. The default value is ./flowfile_repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowfile.repository.partitions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of partitions. The default value is 256.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowfile.repository.checkpoint.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The FlowFile Repository checkpoint interval. The default value is 2 mins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.flowfile.repository.always.sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <em>true</em>, any change to the repository will be synchronized to the disk, meaning that NiFi will ask the operating system not to cache the information. This is very expensive and can significantly reduce NiFi performance. However, if it is <em>false</em>, there could be the potential for data loss if either there is a sudden power loss or the operating system crashes. The default value is <em>false</em>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Swap Management</strong><br></p>
</div>
<div class="paragraph">
<p>NiFi keeps FlowFile information in memory (the JVM)
but during surges of incoming data, the FlowFile information can start to take up so much of the JVM that system performance
suffers. To counteract this effect, NiFi "swaps" the FlowFile information to disk temporarily until more JVM space becomes
available again. These properties govern how that process occurs.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.swap.manager.implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Swap Manager implementation. The default value is org.apache.nifi.controller.FileSystemSwapManager and should not be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.queue.swap.threshold</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The queue threshold at which NiFi starts to swap FlowFile information to disk. The default value is 20000.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.swap.in.period</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The swap in period. The default value is 5 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.swap.in.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to use for swapping in. The default value is 1.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.swap.out.period</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The swap out period. The default value is 5 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.swap.out.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to use for swapping out. The default value is 4.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Content Repository</strong><br></p>
</div>
<div class="paragraph">
<p>The Content Repository holds the content for all the FlowFiles in the system. By default, it is installed in the same root
installation directory as all the other repositories; however, administrators will likely want to configure it on a separate
drive if available. If nothing else, it is best if the Content Repository is not on the same drive as the FlowFile Repository.
In dataflows that handle a large amount of data, the Content Repository could fill up a disk and the
FlowFile Repository, if also on that disk, could become corrupt. To avoid this situation, configure these repositories on different drives.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Content Repository implementation. The default value is org.apache.nifi.controller.repository.FileSystemRepository and should not be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.claim.max.appendable.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size for a content claim. The default value is 10 MB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.claim.max.flow.files</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of FlowFiles to assign to one content claim. The default value is 100.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.directory.default*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the Content Repository. The default value is ./content_repository.<br>
<br>
<strong>NOTE</strong>: Multiple content repositories can be specified by using the <strong><em>nifi.content.repository.directory.</em></strong> prefix with unique suffixes and separate paths as values.<br>
<br>
For example, to provide two additional locations to act as part of the content repository, a user could also specify additional properties with keys of:<br>
<br>
nifi.provenance.repository.directory.content1=/repos/provenance1<br>
nifi.provenance.repository.directory.content2=/repos/provenance2<br>
<br>
Providing three total locations, including  <em>nifi.content.repository.directory.default</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.archive.max.retention.period</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If archiving is enabled (see nifi.content.repository.archive.enabled below), then
this property specifies the maximum amount of time to keep the archived data. It is 12 hours by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.archive.max.usage.percentage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If archiving is enabled (see nifi.content.repository.archive.enabled below), then this property also must have a value to indicate the maximum percentage of disk space that may be used before archive data is removed. If this value is already met even before archiving then arhival will not be of much use. It is 50% by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.archive.enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable archiving, set this to <em>true</em> and specify a value for the nifi.content.repository.archive.max.usage.percentage property above. By default, archiving is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.repository.always.sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <em>true</em>, any change to the repository will be synchronized to the disk, meaning that NiFi will ask the operating system not to cache the information. This is very expensive and can significantly reduce NiFi performance. However, if it is <em>false</em>, there could be the potential for data loss if either there is a sudden power loss or the operating system crashes. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.content.viewer.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL for a web-based content viewer if one is available. It is blank by default.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Provenance Repository</strong><br></p>
</div>
<div class="paragraph">
<p>The Provenance Repository contains the information related to Data Provenance. The next three sections are for Provenance Repository properties.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Provenance Repository implementation. The default value is org.apache.nifi.provenance.PersistentProvenanceRepository and should not be changed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Persistent Provenance Repository Properties</strong><br></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.directory.default*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the Provenance Repository. The default value is ./provenance_repository.<br>
<br>
<strong>NOTE</strong>: Multiple provenance repositories can be specified by using the <strong><em>nifi.provenance.repository.directory.</em></strong> prefix with unique suffixes and separate paths as values.<br>
<br>
For example, to provide two additional locations to act as part of the provenance repository, a user could also specify additional properties with keys of:<br>
<br>
nifi.provenance.repository.directory.provenance1=/repos/provenance1<br>
nifi.provenance.repository.directory.provenance2=/repos/provenance2<br>
<br>
Providing three total locations, including  <em>nifi.provenance.repository.directory.default</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.max.storage.time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum amount of time to keep data provenance information. The default value is 24 hours.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.max.storage.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum amount of data provenance information to store at a time. The default is 1 GB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.rollover.time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time to wait before rolling over the latest data provenance information so that it is available in the User Interface. The default value is 5 mins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.rollover.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of information to roll over at a time. The default value is 100 MB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.query.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to use for Provenance Repository queries. The default value is 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.index.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to use for indexing Provenance events so that they are searchable. The default value is 1.
	For flows that operate on a very high number of FlowFiles, the indexing of Provenance events could become a bottleneck. If this is the case, a bulletin will appear, indicating that
	"The rate of the dataflow is exceeding the provenance recording rate. Slowing down flow to accommodate." If this happens, increasing the value of this property
	may increase the rate at which the Provenance Repository is able to process these records, resulting in better overall throughput.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.compress.on.rollover</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether to compress the provenance information when rolling it over. The default value is <em>true</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.always.sync</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <em>true</em>, any change to the repository will be synchronized to the disk, meaning that NiFi will ask the operating system not to cache the information. This is very expensive and can significantly reduce NiFi performance. However, if it is <em>false</em>, there could be the potential for data loss if either there is a sudden power loss or the operating system crashes. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.journal.count</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of journal files that should be used to serialize Provenance Event data. Increasing this value will allow more tasks to simultaneously update the repository but will result in more expensive merging of the journal files later. This value should ideally be equal to the number of threads that are expected to update the repository simultaneously, but 16 tends to work well in must environments. The default value is 16.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.indexed.fields</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a comma-separated list of the fields that should be indexed and made searchable. Fields that are not indexed will not be searchable. Valid fields are: EventType, FlowFileUUID, Filename, TransitURI, ProcessorID, AlternateIdentifierURI, Relationship, Details. The default value is: EventType, FlowFileUUID, Filename, ProcessorID.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.indexed.attributes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is a comma-separated list of FlowFile Attributes that should be indexed and made searchable. It is blank by default.  But some good examples to consider are <em>filename</em>, <em>uuid</em>, and <em>mime.type</em> as well as any custom attritubes you might use which are valuable for your use case.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.index.shard.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Large values for the shard size will result in more Java heap usage when searching the Provenance Repository but should provide better performance. The default value is 500 MB.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.max.attribute.length</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the maximum length that a FlowFile attribute can be when retrieving a Provenance Event from the repository. If the length of any attribute exceeds this value, it will be truncated when the event is retrieved. The default is 65536.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Volatile Provenance Repository Properties</strong><br></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.provenance.repository.buffer.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Provenance Repository buffer size. The default value is 100000.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Component Status Repository</strong><br></p>
</div>
<div class="paragraph">
<p>The Component Status Repository contains the information for the Component Status History tool in the User Interface. These
properties govern how that tool works.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.components.status.repository.implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Component Status Repository implementation. The default value is org.apache.nifi.controller.status.history.VolatileComponentStatusRepository and should not be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.components.status.repository.buffer.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the buffer size for the Component Status Repository. The default value is 288.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.components.status.snapshot.frequency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This value indicates how often to present a snapshot of the components' status history. The default value is 5 mins.</p></td>
</tr>
</tbody>
</table>
<div id="site_to_site_properties" class="paragraph">
<p><strong>Site to Site Properties</strong><br></p>
</div>
<div class="paragraph">
<p>These properties govern how this instance of NiFi communicates with remote instances of NiFi when Remote Process Groups are configured in the dataflow.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.remote.input.socket.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host name that will be given out to clients to connect to this NiFi instance for Site-to-Site communication. By default, it is the value from InetAddress.getLocalHost().getHostName(). On UNIX-like operating systems, this is typically the output from the <code>hostname</code> command.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.remote.input.socket.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The remote input socket port for Site-to-Site communication. By default, it is blank, but it must have a value in order to use Remote Process Groups.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.remote.input.secure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates whether communication between this instance of NiFi and remote NiFi instances should be secure. By default, it is set to <em>true</em>. In order for secure site-to-site to work, many Security Properties (below) must also be configured.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Web Properties</strong><br></p>
</div>
<div class="paragraph">
<p>These properties pertain to the web-based User Interface.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.war.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the location of the web war directory. The default value is ./lib.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.http.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP host. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.http.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP port. The default value is 8080.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.https.host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTPS host. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.https.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTPS port. It is blank by default. When configuring NiFi to run securely, this port should be configured.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nif.web.jetty.working.directory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the Jetty working directory. The default value is ./work/jetty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.web.jetty.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of Jetty threads. The default value is 200.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Security Properties</strong><br></p>
</div>
<div class="paragraph">
<p>These properties pertain to various security features in NiFi. Many of these properties are covered in more detail in the
Security Configuration section of this Administrator&#8217;s Guide.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.sensitive.props.key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the password used to encrypt any sensitive property values that are configured in processors. By default, it is blank, but the system administrator should provide a value for it. It can be a string of any length. Be aware that once this password is set and one or more sensitive processor properties have been configured, this password should not be changed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.sensitive.props.algorithm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The algorithm used to encrypt sensitive properties. The default value is PBEWITHMD5AND256BITAES-CBC-OPENSSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.sensitive.props.provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sensitive property provider. The default value is BC.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.keystore*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full path and name of the keystore. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.keystoreType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The keystore type. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.keystorePasswd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The keystore password. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.keyPasswd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The key password. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.truststore*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The full path and name of the truststore. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.truststoreType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The truststore type. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.truststorePasswd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The truststore password. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.needClientAuth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates whether client authentication in the cluster protocol. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.user.credential.cache.duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The length of time to cache user credentials. The default value is 24 hours.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.user.authority.provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates what type of authority provider to use. The default value is file-provider, which refers to the file
configured in the core property <code>nifi.authority.provider.configuration.file</code>. Another authority provider may be used, such as when the NiFi instance is part of a cluster. But the default value of file-provider is fine for a standalone instance of NiFi.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.user.login.identity.provider</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates what type of login identity provider to use. The default value is blank, can be set to the identifier from a provider
in the file specified in <code>nifi.login.identity.provider.configuration.file</code>. Setting this property will trigger NiFi to support username/password authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.support.new.account.requests</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates whether a secure NiFi is configured to allow users to request access. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.anonymous.authorities</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates what roles to grant to anonymous users accessing NiFi over HTTPS. It is blank by default, but could be
set to any combination of ROLE_MONITOR, ROLE_DFM, ROLE_ADMIN, ROLE_PROVENANCE, ROLE_NIFI. Leaving this property blank will require that users accessing NiFi
over HTTPS be authenticated either using a client certificate or their credentials against the configured log identity provider.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.ocsp.responder.url</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the URL for the Online Certificate Status Protocol (OCSP) responder if one is being used. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.security.ocsp.responder.certificate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the location of the OCSP responder certificate if one is being used. It is blank by default.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Cluster Common Properties</strong><br></p>
</div>
<div class="paragraph">
<p>When setting up a NiFi cluster, these properties should be configured the same way on both the cluster manager and the nodes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.heartbeat.interval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The interval at which nodes should emit heartbeats to the cluster manager. The default value is 5 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.is.secure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This indicates whether cluster communications are secure. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.socket.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time to wait for a cluster protocol socket to be established before trying again. The default value is 30 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.connection.handshake.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time to wait for a node to connect to the cluster. The default value is 45 sec.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Multicast Cluster Common Properties</strong><br>
If multicast is used, the following nifi.cluster.protocol.multicast.xxx properties must be configured. By default, unicast is used.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.use.multicast</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates whether multicast is being used. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.multicast.address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cluster multicast address. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.multicast.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cluster multicast port. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.multicast.service.broadcast.delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The multicast service broadcast delay. The default value is 500 ms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.multicast.service.locator.attempts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of multicast service locator attempts to make. The default value is 3.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.protocol.multicast.service.locator.attempts.delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The multicast service locator attempts delay. The default value is 1 sec.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Cluster Node Properties</strong><br></p>
</div>
<div class="paragraph">
<p>Only configure these properties for cluster nodes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.is.node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this to <em>true</em> if the instance is a node in a cluster. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.node.address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified address of the node. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.node.protocol.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The node&#8217;s protocol port. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.node.protocol.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads used for the node protocol. The default value is 2.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.node.unicast.manager.address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If multicast is not used, the value for this property should be the same as the value configured on the cluster manager for manager address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.node.unicast.manager.protocol.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If multicast is not used, the value for this property should be the same as the value configured on the cluster manager for manager protocol port.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Cluster Manager Properties</strong><br></p>
</div>
<div class="paragraph">
<p>Only configure these properties for the cluster manager.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.is.manager</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set this to <em>true</em> if the instance is a cluster manager. The default value is <em>false</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.address</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fully qualified address of the cluster manager. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.protocol.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The cluster manager&#8217;s protocol port. It is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.node.firewall.file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the node firewall file. This is a file that may be used to list all the nodes that are allowed to connect to the cluster. It provides an additional layer of security. This value is blank by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.node.event.history.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the cluster manager&#8217;s event history. The default value is 10.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.node.api.connection.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of time to wait for an API connection to be made. The default value is 30 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.node.api.read.timeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The API read timeout. The default value is 30 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.node.api.request.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads to use for API requests. The default value is 10.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.flow.retrieval.delay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The delay before the cluster manager retrieves the latest flow configuration. The default value is 5 sec.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.protocol.threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of threads used for the cluster manager protocol. The default value is 10.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.cluster.manager.safemode.duration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Upon restart of an already existing cluster, this is the amount of time that the cluster manager waits for the primary node to connect before giving up and selecting another node to be the primary node. The default value is 0 sec, which means to wait forever. If the administrator does not care which node is the primary node, this value can be changed to some amount of time other than 0 sec.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Kerberos</strong><br></p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nifi.kerberos.krb5.file*</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the krb5 file, if used. It is blank by default. Note that this property is not used to authenticate NiFi users.
    Rather, it is made available for extension points, such as Hadoop-based Processors, to use. At this time, only a single krb5 file is allowed to
    be specified per NiFi instance, so this property is configured here rather than in individual Processors.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>For Upgrading</strong> - Take care when configuring the properties above that are marked with an asterisk (*). To make the upgrade process easier, it is advisable to change the default configurations to locations outside the main root installation directory. In this way, these items can remain in their configured location through an upgrade, and NiFi can find all the repositories and configuration files and pick up where it left off as soon as the old version is stopped and the new version is started. Furthermore, the administrator may reuse this <em>nifi.properties</em> file and any other configuration files without having to re-configure them each time an upgrade takes place. As previously noted, it is important to check for any changes in the <em>nifi.properties</em> file of the new version when upgrading and make sure they are reflected in the <em>nifi.properties</em> file you use.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-12-23 18:08:47 UTC
</div>
</div>
</body>
</html>