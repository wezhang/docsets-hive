<!DOCTYPE html>
<html>
<head>
                    <title>SQL Standard Based Hive Authorization - Apache Hive - Apache Software Foundation</title>
    
        

                        
    
                        
    

                
    
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">
<meta charset="UTF-8">
<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://cwiki.apache.org/confluence">

<meta id="atlassian-token" name="atlassian-token" content="735c8f668271f8e1dea73527ae5689ca93f07505">


<meta id="confluence-space-key" name="confluence-space-key" content="Hive">
<script type="text/javascript">
        var contextPath = '/confluence';
</script>

    

    <meta name="confluence-request-time" content="1451833557985">
        
    
        
            <meta name="ajs-is-space-admin" content=""> <meta name="ajs-has-space-config" content="">
            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="$discoveredList">
            <meta name="ajs-keyboardshortcut-hash" content="38450baaed51271899c8e867d2a48ca9">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            <meta name="gliffy-license-type" content="LicenseType&lt;COMMUNITY&gt;">
<meta name="gliffy-license-quantity" content="${pluginLicenseManager.userCount}">

            <script type="text/x-template" title="gliffy-webpanel-footer">
        <div class="gliffy-webpanel-footer"><span>This Confluence installation runs a Free Gliffy License - Evaluate the <a href="http://www.gliffy.com/products/confluence-plugin/">Gliffy Confluence Plugin</a> for your Wiki!</span></div>
</script>


            
    
    
            <meta name="ajs-page-id" content="40509928">
            <meta name="ajs-latest-page-id" content="40509928">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-page-title" content="SQL Standard Based Hive Authorization">
            <meta name="ajs-parent-page-title" content="LanguageManual Authorization">
            <meta name="ajs-parent-page-id" content="27362032">
            <meta name="ajs-space-key" content="Hive">
            <meta name="ajs-space-name" content="Apache Hive">
            <meta name="ajs-jira-metadata-count" content="-1">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="false">
            <meta name="ajs-browse-page-tree-mode" content="view">
            <meta name="ajs-shared-drafts" content="false">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://cwiki.apache.org/confluence">
            <meta name="ajs-version-number" content="5.8.4">
            <meta name="ajs-build-number" content="5982">
            <meta name="ajs-remote-user" content="">
            <meta name="ajs-remote-user-key" content="">
            <meta name="ajs-current-user-fullname" content="">
            <meta name="ajs-current-user-avatar-url" content="">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_">
            <meta name="ajs-global-settings-attachment-max-size" content="20971520">
            <meta name="ajs-user-locale" content="en_GB">
            <meta name="ajs-enabled-dark-features" content="confluence-inline-comments-resolved,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareContentEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.mentions.api.ConfluenceMentionEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.security.ForgotPasswordEvent,pdf-preview,notification.plugin.api.enabled.com.atlassian.confluence.plugins.tasklist.event.SendTaskEmailEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageMovedEvent,previews.sharing,previews.versions,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentUpdateEvent,file-annotations,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.attachment.AttachmentBatchUploadCompletedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentCreateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingLessUsersEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentRemoveEvent,atlassian.aui.raphael.disabled,previews.conversion-service,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.comment.CommentUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.follow.FollowEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageEditedEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostCreateEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentResolveEvent,notification.plugin.api.enabled.com.atlassian.confluence.event.events.like.LikeCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,previews.sharing.pushstate,confluence-inline-comments-rich-editor,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostUpdateEvent,file-annotations.likes,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.page.async.PageCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.files.notifications.event.FileContentMentionUpdateEvent,notification.plugin.api.enabled.com.atlassian.confluence.efi.emails.events.OnboardingNoSpaceCreatedEvent,notification.plugin.api.enabled.com.atlassian.confluence.plugins.hipchat.api.events.HipChatUserMapped,notification.plugin.api.enabled.com.atlassian.confluence.plugins.sharepage.api.ShareAttachmentEvent,confluence-inline-comments,confluence-inline-comments-dangling-comment,notification.plugin.api.enabled.com.atlassian.confluence.event.events.content.blogpost.BlogPostMovedEvent">
            <meta name="ajs-atl-token" content="735c8f668271f8e1dea73527ae5689ca93f07505">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://cwiki.apache.org/confluence/opensearch/osd.action" title="Apache Software Foundation"/>
    
                    
            <meta name="ajs-create-issue-metadata-show-discovery" content="false">
            

<script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\"/confluence\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:atlassian-nps-plugin-resources.is-server-instance-data-provider"]="true";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:browser-metrics.feature-data-provider-legacy"]="true";
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern"]="\"(?:/confluence(?:/s/.*?/_)?/download)\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\"daysBeforeLicenseExpiry\":0,\"daysBeforeMaintenanceExpiry\":0,\"showLicenseExpiryBanner\":false,\"showMaintenanceExpiryBanner\":false,\"renewUrl\":null,\"salesEmail\":null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin:discovery-javascript-data.link-active"]="{\"linkActive\":true,\"conditionsMet\":true,\"admin\":false}";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.analytics-enabled-data-provider"]="\"true\"";
WRM._unparsedData["com.atlassian.plugins.atlassian-nps-plugin:nps-acknowledgement-resources.sen-data-provider"]="\"SEN-2015076\"";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api.feature-data-provider"]="true";
</script>
<link type="text/css" rel="stylesheet" href="../../s/2e51e60e83eadbb79c5004bd9c4ac765-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/68/_/download/superbatch/css/batch.css@build-number=5982" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/68/_/download/superbatch/css/batch.css?conditionalComment=lt+IE+9" media="all">
<![endif]-->
<!--[if lte IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/68/_/download/superbatch/css/batch.css?conditionalComment=lte+IE+9" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/9b6bdeb7fddc0a2f5337e313f4e85615-T/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/ec13b76cd8d002fa2cf4ca229002aee7/_/download/contextbatch/css/page,viewcontent,atl.general,main,pagebanner,atl.comments/batch.css@highlightactions=true&amp;locale=en-GB&amp;flavour=VANILLA" media="all">
<!--[if lt IE 9]>
<link type="text/css" rel="stylesheet" href="/confluence/s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/ec13b76cd8d002fa2cf4ca229002aee7/_/download/contextbatch/css/page,viewcontent,atl.general,main,pagebanner,atl.comments/batch.css?conditionalComment=lt+IE+9&amp;locale=en-GB" media="all">
<![endif]-->
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.8.6/_/download/batch/org.randombits.confluence.toc%253Atoc-plugin-styles/org.randombits.confluence.toc%253Atoc-plugin-styles.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.1.5/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.1.5/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin%253Ash-theme-default/com.atlassian.confluence.ext.newcode-macro-plugin%253Ash-theme-default.css" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/13/_/styles/colors.css@spaceKey=Hive" media="all">
<link type="text/css" rel="stylesheet" href="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/1.0/_/download/resources/com.atlassian.confluence.themes.default%253Astyles/default-theme.css" media="all">
<script type="text/javascript" src="../../s/b5b7f3c4a47ebde54b884c3070e3bb8c-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/68/_/download/superbatch/js/batch.js@atlassian.aui.raphael.disabled=true&amp;locale=en-GB&amp;build-number=5982" ></script>
<script type="text/javascript" src="../../s/47fb273cd38c3662368839aefb134f70-T/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/ec13b76cd8d002fa2cf4ca229002aee7/_/download/contextbatch/js/page,viewcontent,atl.general,main,pagebanner,atl.comments/batch.js@highlightactions=true&amp;analytics-uploadable=true&amp;flavour=VANILLA&amp;nps-acknowledged=true&amp;analytics-enabled=true&amp;locale=en-GB&amp;anonymous-access-enabled=true&amp;is-server-instance=true&amp;hostenabled=true" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.8.6/_/download/batch/org.randombits.confluence.toc%253Aclient-side-toc-resources/org.randombits.confluence.toc%253Aclient-side-toc-resources.js" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.8.6/_/download/batch/org.randombits.confluence.toc%253Atoc-plugin-analytics/org.randombits.confluence.toc%253Atoc-plugin-analytics.js" ></script>
<script type="text/javascript" src="../../s/6c0981174e94142364564819dc0d1413-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.1.5/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter.js@locale=en-GB" ></script>
<script type="text/javascript" src="../../s/d41d8cd98f00b204e9800998ecf8427e-CDN/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/2.1.5/_/download/batch/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter-brushes/com.atlassian.confluence.ext.newcode-macro-plugin%253Asyntaxhighlighter-brushes.js" ></script>


        
    

        
        <meta name="ajs-site-title" content="Apache Software Foundation" />

    
    

    
                <link rel="canonical" href="SQL+Standard+Based+Hive+Authorization">
        <link rel="shortlink" href="https://cwiki.apache.org/confluence/x/6CFqAg">
    <meta name="wikilink" content="[Hive:SQL Standard Based Hive Authorization]">
    <meta name="page-version" content="64">

</head>

<body             onload="placeFocus()"
     id="com-atlassian-confluence" class="theme-default  aui-layout aui-theme-default">

        
            <div id='stp-licenseStatus-banner'></div>
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="SQL+Standard+Based+Hive+Authorization#title-heading">Skip to content</a></li>
    <li><a href="SQL+Standard+Based+Hive+Authorization#breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="SQL+Standard+Based+Hive+Authorization#header-menu-bar">Skip to header menu</a></li>
    <li><a href="SQL+Standard+Based+Hive+Authorization#navigation">Skip to action menu</a></li>
    <li><a href="SQL+Standard+Based+Hive+Authorization#quick-search-query">Skip to quick search</a></li>
</ul>
<div id="page">
<div id="full-height-container">
    <div id="header-precursor">
        <div class="cell">
            <style type="text/css">
#preview #previewArea iframe {

   overflow: visible;
}
</style>

                            </div>
    </div>
    



<header id="header" role="banner">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-owns="app-switcher" aria-controls="app-switcher" aria-haspopup="true" data-aui-trigger href="SQL+Standard+Based+Hive+Authorization#app-switcher"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default"><div class="app-switcher-loading">Loading&hellip;</div></div><script>
            (function (NL) {
                var initialise = function () {
                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.
                    window.atlassian = window.atlassian || window.aui;
                    new NL.AppSwitcher({
                        dropdownContents: '#app-switcher'
                    });
                };
                if (NL.AppSwitcher) {
                    initialise();
                } else {
                    NL.onInit = initialise;
                }
            }(window.NL = (window.NL || {})));
            window.NL.isUserAdmin = false</script></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://cwiki.apache.org/confluence/"><img src="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/images/logo/confluence-logo.png" alt="Apache Software Foundation" /></a></h1><ul class="aui-nav">
                            <li>
            
        
        
<a  id="space-directory-link" href="https://cwiki.apache.org/confluence/spacedirectory/view.action"  class=" aui-nav-imagelink"   title="Spaces">
            <span>Spaces</span>
    </a>
        </li>
                        </ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                        <li>
        <form id="quick-search" class="aui-quicksearch dont-default-focus header-quicksearch" action="https://cwiki.apache.org/confluence/dosearchsite.action" method="get"><fieldset><label for="quick-search-query" class="assistive">Quick Search</label><input id="quick-search-query" class="text app-search search quick-search-query" type="text" accessKey="q" autocomplete="off" name="queryString" title="Quick Search" placeholder="Search" /><input id="quick-search-submit" class="quick-search-submit" type="submit" value="Search"/><div class="aui-dd-parent quick-nav-drop-down"></div></fieldset></form>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger" href="SQL+Standard+Based+Hive+Authorization#" aria-haspopup="true" aria-owns="help-menu-link-content" title="Help">
        <span class="aui-icon aui-icon-small aui-iconfont-help">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default" aria-hidden="true">
                    <div class="aui-dropdown2-section">
                                <ul  id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a  id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-58/Getting+Help+And+Support" class="    "      title="Visit the Confluence documentation home"  target="_blank"
>
        Online Help
</a>
</li>
                                            <li>
    
            
<a  id="keyboard-shortcuts-link" href="https://cwiki.apache.org/confluence" class="    "      title="View available keyboard shortcuts" >
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a  id="feed-builder-link" href="https://cwiki.apache.org/confluence/dashboard/configurerssfeed.action" class="    "      title="Create your custom RSS feed." >
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-58/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
            
<a  id="whats-new-menu-link" href="https://docs.atlassian.com/confluence/docs-58/whatsnew/iframe" class="    "      title="" >
        What’s new
</a>
</li>
                                            <li>
    
            
<a  id="gadget-directory-link" href="https://cwiki.apache.org/confluence" class="   user-item administration-link "      title="Browse gadgets provided by Confluence" >
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a  id="confluence-about-link" href="https://cwiki.apache.org/confluence/aboutconfluencepage.action" class="    "      title="Get more information about Confluence" >
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
            
    </li>
        <li>
                                            <li>
        
            
<a  id="login-link" href="https://cwiki.apache.org/confluence/login.action?os_destination=%2Fdisplay%2FHive%2FSQL%2BStandard%2BBased%2BHive%2BAuthorization" class="   user-item login-link "      title="" >
        Log in
</a>
</li>
                        <li>
    
            
<a  id="signup-link" href="https://cwiki.apache.org/confluence/signup.action" class="   user-item signup-link "      title="" >
        Sign up
</a>
</li>
                        
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>

    
    	<div class="ia-splitter">
    		<div class="ia-splitter-left">
    			<div class="ia-fixed-sidebar">
    				
	    	<div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="Edit space details"><div class="avatar"><div class="space-logo " data-key="Hive" data-name="Apache Hive" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="https://cwiki.apache.org/confluence/display/Hive" title="Apache Hive"><img class="avatar-img" src="../../download/attachments/27362113/Hive@version=2&amp;modificationDate=1317659390000&amp;api=v2" alt="Apache Hive"></a></div></div></div></div><div class="name"><a href="https://cwiki.apache.org/confluence/display/Hive" title="Apache Hive">Apache Hive</a></div><div class="flyout-handle icon"></div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="false" data-quick-links-state="null" data-nav-type="pages"><div class="acs-nav-sections"><div class="main-links-section "><ul class="acs-nav-list"><li class="acs-nav-item wiki current-item"data-collector-key="spacebar-pages"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" data-collapsed-tooltip="Pages"><span class="icon"></span><span class="acs-nav-item-label">Pages</span></a></li><li class="acs-nav-item blog"data-collector-key="spacebar-blogs"><a class="acs-nav-item-link tipsy-enabled" href="https://cwiki.apache.org/confluence/pages/viewrecentblogposts.action?key=Hive" data-collapsed-tooltip="Blog"><span class="icon"></span><span class="acs-nav-item-label">Blog</span></a></li></ul></div><div class="quick-links-wrapper"></div></div></div></div><div class="ia-secondary-container tipsy-enabled" data-tree-type="pages"><div class="ia-secondary-header"><h5 class="ia-secondary-header-title pages"><span class="label">Child pages</span></h5></div><div class="ia-secondary-parent-content"><ul class="parent ia-secondary-header-title wiki"><li class="parent-item"><a class="parent-item-link" href="LanguageManual+Authorization" title="LanguageManual Authorization"><span class="icon"></span><span class="label">LanguageManual Authorization</span></a></li></ul></div><div class="ia-secondary-current-content"><ul class="ia-secondary-currentPage-title wiki current-item"><li><span class="icon"></span><span class="label">SQL Standard Based Hive Authorization</span></li></ul></div><div class="ia-secondary-content"><div class="contextual-nav-child-pages"></div></div></div></div><div class="hidden"><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive" id="space-pages-link"></a><script type="text/x-template" title="logo-config-content"><h2>Space Details</h2><div class="personal-space-logo-hint">Your profile picture is used as the logo for your personal space. <a href="https://cwiki.apache.org/confluence/users/profile/editmyprofilepicture.action" target="_blank">Change your profile picture</a>.</div></script></div></div><div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden"><div data-label="Browse pages" data-class="" data-href="/confluence/pages/reorderpages.action?key=Hive">Browse pages</div></div><div id="space-tools-dd-dummy"></div><a id="space-tools-menu-trigger" class="aui-button aui-button-subtle aui-dropdown2-trigger tipsy-enabled" aria-owns="space-tools-dd-dummy"><span class="aui-icon aui-icon-small aui-iconfont-configure">Configure</span><span class="label">Space tools</span></a><a class="expand-collapse-trigger"></a></div>
    
    			</div>
    		</div>
        <!-- \#header -->

        
        <div id="main" class=" aui-page-panel">
                <div id="main-header">
            
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                                        
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="SQL+Standard+Based+Hive+Authorization#" aria-haspopup="true" aria-owns="action-menu" data-container="#navigation">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default">
                            <ul  id="action-menu-primary"                     class="section-primary first aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-attachments-link" href="https://cwiki.apache.org/confluence/pages/viewpageattachments.action?pageId=40509928" rel="nofollow" class="action-view-attachments"  accessKey="t"  title="View Attachments">
                <span>
                        A<u>t</u>tachments (1)
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-history-link" href="https://cwiki.apache.org/confluence/pages/viewpreviousversions.action?pageId=40509928" rel="nofollow" class="action-view-history"   title="">
                <span>
                        Page History
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-page-permissions-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=40509928" rel="nofollow" class="action-page-permissions"   title="Edit restrictions">
                <span>
                        Restrictions
        </span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-secondary"                     class="section-secondary aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="view-page-info-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=40509928" rel="nofollow" class="action-view-info"   title="">
                <span>
                        Page Information
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="view-resolved-comments" href="https://cwiki.apache.org/confluence" rel="nofollow" class=""   title="">
                <span>
                        Resolved comments
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="link-to-page-link" href="https://cwiki.apache.org/confluence/pages/viewinfo.action?pageId=40509928" rel="nofollow" class=""   title="Link to this Page">
                <span>
                        Link to this Page…
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="view-in-hierarchy-link" href="https://cwiki.apache.org/confluence/pages/reorderpages.action?key=Hive&amp;openId=40509928#selectedPageInHierarchy" rel="nofollow" class=""   title="">
                <span>
                        View in Hierarchy
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-view-source-link" href="https://cwiki.apache.org/confluence/plugins/viewsource/viewpagesrc.action?pageId=40509928" rel="nofollow" class="action-view-source popup-link"   title="">
                <span>
                        View Source
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="delete-all-comments-link-link" href="https://cwiki.apache.org/confluence/plugins/aptis/deleteAllComments/ask-user.action?pageId=40509928" rel="nofollow" class=""   title="">
                <span>
                        Delete comments
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-pdf-link" href="https://cwiki.apache.org/confluence/spaces/flyingpdf/pdfpageexport.action?pageId=40509928" rel="nofollow" class=""   title="">
                <span>
                        Export to PDF
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="com-k15t-confluence-scroll-epub-launcher" href="https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=40509928" rel="nofollow" class=""   title="">
                <span>
                        Export to EPUB
        </span>    </a>
</li>
                                        <li>

    
        
                                            
    
    
    <a  id="action-export-word-link" href="https://cwiki.apache.org/confluence/exportword?pageId=40509928" rel="nofollow" class="action-export-word"   title="">
                <span>
                        Export to Word
        </span>    </a>
</li>
                                </ul>
                            <ul  id="action-menu-modify"                     class="section-modify aui-dropdown2-section">
                                            <li>

    
        
                                            
    
    
    <a  id="treecopy-action" href="https://cwiki.apache.org/confluence/plugins/treecopy/setnames.action?pageId=40509928" rel="nofollow" class=""   title="">
                <span>
                        Copy Page Tree
        </span>    </a>
</li>
                                </ul>
                    </div>
    </li>
            </ul>
    </div>

            
            <div id="title-heading" class="pagetitle with-breadcrumbs">
                
                                    <div id="breadcrumb-section">
                        
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first" >
                        
                            <span class=""><a href="https://cwiki.apache.org/confluence/collector/pages.action?key=Hive">Pages</a></span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="LanguageManual">LanguageManual</a></span>
                                                                    
                        
        <li>
                        
                            <span class=""><a href="LanguageManual+Authorization">LanguageManual Authorization</a></span>
                                                    </ol>


                    </div>
                
                
        <a href="SQL+Standard+Based+Hive+Authorization#page-banner-end" class="assistive">Skip to end of banner</a>
<div id="page-banner-start" class="assistive"></div>

                    
            <div id="page-metadata-banner"><ul class="banner"><li id="system-content-items" class="noprint"><a href="SQL+Standard+Based+Hive+Authorization" title="Restrictions apply" id="content-metadata-page-restrictions" class="hidden"><img class="page-banner-item-icon" src="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/download/resources/com.atlassian.confluence.plugins.confluence-page-banner%253Apage-banner-resources/images/red_padlock.png" style="height: 16px; width: 16px;"/></a><a href="https://cwiki.apache.org/confluence/pages/viewpageattachments.action?pageId=40509928&amp;metadataLink=true" title="1 attachment" id="content-metadata-attachments" ><img class="page-banner-item-icon" src="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/download/resources/com.atlassian.confluence.plugins.confluence-page-banner%253Apage-banner-resources/images/grey_attach.png" style="height: 16px; width: 16px;"/></a></li><li class="page-metadata-item noprint has-button"  id="content-metadata-jira-wrapper"><a href="SQL+Standard+Based+Hive+Authorization" title="" id="content-metadata-jira" class="aui-button aui-button-subtle content-metadata-jira tipsy-disabled hidden"><img class="page-banner-item-icon" src="../../s/en_GB/5982/f2b47fb3d636c8bc9fd0b11c0ec6d0ae18646be7.1/_/download/resources/com.atlassian.confluence.plugins.confluence-jira-metadata%253Aconfluence-jira-metadata-resources/img/icon-jira-link.png" style="height: 16px; width: 16px;"/><span>JIRA links</span></a></li></ul></div>
            

<a href="SQL+Standard+Based+Hive+Authorization#page-banner-start" class="assistive">Go to start of banner</a>
<div id="page-banner-end" class="assistive"></div>
    

                <h1 id="title-text" class="with-breadcrumbs">
                                                <a href="SQL+Standard+Based+Hive+Authorization">SQL Standard Based Hive Authorization</a>
                                    </h1>
            </div>
        </div><!-- \#main-header -->
        
        

        <div id="sidebar-container">
                                                </div><!-- \#sidebar-container -->

        
    

        




        

    
    
        
    
    
                    
    

                        
    
    

    




<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



        <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="https://cwiki.apache.org/confluence/display/Hive/{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="https://cwiki.apache.org/confluence/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
            

        
                            
    

                    

        
        <a href="SQL+Standard+Based+Hive+Authorization#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
            <li class="page-metadata-modification-info">
                
        
    
        
    
        
        
            Created by <span class='author'>     <a href="https://cwiki.apache.org/confluence/display/~thejas"
                       class="url fn"
                            >Thejas M Nair</a></span>, last modified by <span class='editor'>     <a href="https://cwiki.apache.org/confluence/display/~leftyl"
                       class="url fn"
                            >Lefty Leverenz</a></span> on <a class='last-modified' title='Sep 15, 2015 03:25' href='https://cwiki.apache.org/confluence/pages/diffpagesbyversion.action?pageId=40509928&amp;selectedPageVersions=63&amp;selectedPageVersions=64'>Sep 15, 2015</a>
                </li>
        </ul>
    </div>


<a href="SQL+Standard+Based+Hive+Authorization#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
                                            
        <div id="main-content" class="wiki-content">
                           
        <p><br /><div class="toc-macro client-side-toc-macro " data-headerelements="H1,H2,H3"></div></p><h1 id="SQLStandardBasedHiveAuthorization-StatusofHiveAuthorizationbeforeHive0.13">Status of Hive Authorization before Hive 0.13</h1><p>The <a href="LanguageManual+Authorization#LanguageManualAuthorization-3DefaultHiveAuthorization(LegacyMode)">default authorization in Hive</a> is not designed with the intent to protect against malicious users accessing data they should not be accessing. It only helps in preventing users from accidentally doing operations they are not supposed to do. It is also incomplete because it does not have authorization checks for many operations including the grant statement. The authorization checks happen during Hive query compilation. But as the user is allowed to execute dfs commands, user-defined functions and shell commands, it is possible to bypass the client security checks.</p><p>Hive also has support for storage based authorization, which is commonly used to add authorization to metastore server API calls (see <a href="LanguageManual+Authorization#LanguageManualAuthorization-1StorageBasedAuthorizationintheMetastoreServer">Storage Based Authorization in the Metastore Server</a>). As of Hive 0.12.0 it can be used on the client side as well. While it can protect the metastore against changes by malicious users, it does not support fine grained access control (column or row level).</p><p>The default authorization model in Hive can be used to provide fine grained access control by creating views and granting access to views instead of the underlying tables.</p><h1 id="SQLStandardBasedHiveAuthorization-SQLStandardsBasedHiveAuthorization(NewinHive0.13)">SQL Standards Based Hive Authorization (New in Hive 0.13)</h1><p>The SQL standards based authorization option (introduced in Hive 0.13) provides a third option for authorization in Hive. This is recommended because it allows Hive to be fully SQL compliant in its authorization model without causing backward compatibility issues for current users. As users migrate to this more secure model, the current default authorization could be deprecated.</p><p>For an overview of this authorization option, see <a href="LanguageManual+Authorization#LanguageManualAuthorization-2SQLStandardsBasedAuthorizationinHiveServer2" style="text-decoration: none;" rel="nofollow">SQL Standards Based Authorization in HiveServer2</a>.</p><p>This authorization mode can be used in conjunction with storage based authorization on the metastore server. Like the current default authorization in Hive, this will also be enforced at query compilation time. To provide security through this option, the client will have to be secured. This can be done by allowing users access only through Hive Server2, and by restricting the user code and non-SQL commands that can be run. The checks will happen against the user who submits the request, but the query will run as the Hive server user. The directories and files for input data would have read access for this Hive server user. For users who don’t have the need to protect against malicious users, this could potentially be supported through the Hive command line as well.</p><p>The goal of this work has been to comply with the SQL standard as far as possible, but there are deviations from the standard in the implementation. Some deviations were made to make it easier for existing Hive users to migrate to this authorization model, and some were made considering ease of use (in such cases we also looked at what many widely used databases do).</p><p>Under this authorization model, users who have access to the Hive CLI, HDFS commands, Pig command line, 'hadoop jar' command, etc., are considered privileged users. In an organization, it is typically only the teams that work on <a href="http://en.wikipedia.org/wiki/Extract,_transform,_load" class="external-link" rel="nofollow">ETL </a>workloads that need such access. These tools don't access the data through HiveServer2, and as a result their access is not authorized through this model. For Hive CLI, Pig, and MapReduce users access to Hive tables can be controlled using <a href="HCatalog+Authorization">storage based authorization</a> enabled on the metastore server.</p><p>Most users such as business analysts tend to use SQL and ODBC/JDBC through HiveServer2 and their access can be controlled using this authorization model.</p><h2 id="SQLStandardBasedHiveAuthorization-RestrictionsonHiveCommandsandStatements">Restrictions on Hive Commands and Statements</h2><p>Commands such as dfs, add, delete, compile, and reset are disabled when this authorization is enabled.</p><p>The set commands used to change Hive configuration are restricted to a smaller safe set. This is controlled using the <a href="Configuration+Properties#ConfigurationProperties-hive.security.authorization.sqlstd.confwhitelist">hive.security.authorization.sqlstd.confwhitelist</a> configuration parameter. If this set needs to be customized, the HiveServer2 administrator can set a value for this configuration parameter in its hive-site.xml.</p><p>Privileges to add or drop functions and macros are restricted to the <strong>admin</strong> role.</p><p>To enable users to use functions, the ability to create <span class="confluence-link"><a href="LanguageManual+DDL#LanguageManualDDL-Create/DropFunction" rel="nofollow">permanent functions</a></span> has been added. A user in the <strong>admin</strong> role can run commands to create these functions, which all users can then use.</p><p>The Hive <a href="LanguageManual+Transform">transform clause</a> is also disabled when this authorization is enabled.</p><h2 id="SQLStandardBasedHiveAuthorization-Privileges">Privileges</h2><p>● SELECT privilege – gives read access to an object.</p><p>● INSERT privilege – gives ability to add data to an object (table).</p><p>● UPDATE privilege – gives ability to run update queries on an object (table).</p><p>● DELETE privilege – gives ability to delete data in an object (table).</p><p>● ALL PRIVILEGES – gives all privileges (gets translated into all the above privileges).</p><h2 id="SQLStandardBasedHiveAuthorization-Objects">Objects</h2><ul><li>The privileges apply to table and views. The above privileges are not supported on databases.</li><li>Database ownership is considered for certain actions.</li><li>URI is another object in Hive, as Hive allows the use of URI in SQL syntax. The above privileges are not applicable on URI objects. URI used are expected to point to a file/directory in a file system. Authorization is done based on the permissions the user has on the file/directory.</li></ul><h2 id="SQLStandardBasedHiveAuthorization-ObjectOwnership">Object Ownership</h2><p>For certain actions, the ownership of the object (table/view/database) determines if you are authorized to perform the action.</p><p>The user who creates the table, view or database becomes its owner. In the case of tables and views, the owner gets all the privileges with grant option.</p><p>A role can also be the owner of a database. The &quot;<code><a href="LanguageManual+DDL#LanguageManualDDL-AlterDatabase">alter database</a></code>&quot; command can be used to set the owner of a database to a role.</p><h2 id="SQLStandardBasedHiveAuthorization-UsersandRoles">Users and Roles</h2><p>Privileges can be granted to users as well as roles.<br />Users can belong to one or more roles.</p><p>There are two roles with special meaning – <strong>public</strong> and <strong>admin</strong>.<br />All users belong to the <strong>public</strong> role. You use this role in your grant statement to grant a privilege to all users.<br /><br />When a user runs a Hive query or command, the privileges granted to the user and her &quot;<em><strong>current roles</strong></em>&quot; are checked. The current roles can be seen using the &quot;<code>show current roles;</code>&quot; command. All of the user's roles except for the <strong>admin</strong> role will be in the current roles by default, although you can use the &quot;<code>set role</code>&quot; command to set a specific role as the current role. See the command descriptions for details.<br /><br />Users who do the work of a database administrator are expected to be added to the <strong>admin</strong> role. <br />They have privileges for running additional commands such as &quot;<code>create role</code>&quot; and &quot;<code>drop role</code>&quot;. They can also access objects that they haven’t been given explicit access to. However, a user who belongs to the <strong>admin</strong> role needs to run the &quot;<code>set role</code>&quot; command before getting the privileges of the <strong>admin</strong> role, as this role is not in current roles by default.</p><h3 id="SQLStandardBasedHiveAuthorization-NamesofUsersandRoles">Names of Users and Roles</h3><p>Role names are case insensitive. That is, “marketing” and “MarkEting” refer to same role.</p><p>User names are <em>case sensitive</em>. This is because, unlike role names, user names are not managed within Hive. The user can be any user that the hiveserver2 authentication mode supports.</p><h4 id="SQLStandardBasedHiveAuthorization-QuotedIdentifiers">Quoted Identifiers</h4><p>User and role names may optionally be surrounded by backtick characters (`) when the configuration parameter <code><a href="Configuration+Properties#ConfigurationProperties-hive.support.quoted.identifiers" style="text-decoration: none;" rel="nofollow">hive.support.quoted.identifiers</a></code> is set to <code>column</code> (default value). All <a href="http://en.wikipedia.org/wiki/List_of_Unicode_characters" class="external-link" rel="nofollow">Unicode</a> characters are permitted in the quoted identifiers, with double backticks (``) representing a backtick character. However when <code><a href="Configuration+Properties#ConfigurationProperties-hive.support.quoted.identifiers" style="text-decoration: none;" rel="nofollow">hive.support.quoted.identifiers</a></code> is set to <code>none</code>, only alphanumeric and underscore characters are permitted in user names and role names.</p><p>For details, see <a href="https://issues.apache.org/jira/browse/HIVE-6013" class="external-link" rel="nofollow">HIVE-6013</a> and <a href="https://issues.apache.org/jira/secure/attachment/12618321/QuotedIdentifier.html" class="external-link" rel="nofollow">Supporting Quoted Identifiers in Column Names</a>.</p><p><span>As of <a href="https://issues.apache.org/jira/browse/HIVE-8083" class="external-link" rel="nofollow">Hive 0.14</a>, user may be optionally surrounded by </span><span>backtick characters (`) irrespective of the <code><a href="Configuration+Properties#ConfigurationProperties-hive.support.quoted.identifiers" rel="nofollow">hive.support.quoted.identifiers</a></code> setting.</span></p><h3 id="SQLStandardBasedHiveAuthorization-RoleManagementCommands"><strong>Role Management Commands</strong></h3><h4 id="SQLStandardBasedHiveAuthorization-CreateRole">Create Role</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[CREATE ROLE role_name;]]></script>
</div></div><p>Creates a new role. Only the <strong>admin</strong> role has privilege for this.</p><p>The role names ALL, DEFAULT and NONE are reserved.</p><h4 id="SQLStandardBasedHiveAuthorization-DropRole">Drop Role</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[DROP ROLE role_name;]]></script>
</div></div><p>Drops the given role. Only the <strong>admin</strong> role has privilege for this.</p><h4 id="SQLStandardBasedHiveAuthorization-ShowCurrentRoles">Show Current Roles</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SHOW CURRENT ROLES;]]></script>
</div></div><p>Shows the list of the user's <a href="SQL+Standard+Based+Hive+Authorization#SQLStandardBasedHiveAuthorization-UsersandRoles">current roles</a>. All actions of the user are authorized by looking at the privileges of the user and all current roles of the user.</p><p>The default current roles has all roles for the user except for the <strong>admin</strong> role (even if the user belongs to the <strong>admin</strong> role as well).</p><p>Any user can run this command.</p><h4 id="SQLStandardBasedHiveAuthorization-SetRole">Set Role</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SET ROLE (role_name|ALL|NONE);]]></script>
</div></div><p>If a role_name is specified, then that role becomes the only role in current roles.</p><p>Setting role_name to ALL refreshes the list of current roles (in case new roles were granted to the user) and sets them to the default list of roles.</p><p>Setting role_name to NONE will remove all current roles from the current user. (It's introduced in <a href="https://issues.apache.org/jira/browse/HIVE-11780" class="external-link" rel="nofollow">HIVE-11780</a> and will be included in the upcoming versions 1.3.0 and 1.2.2.)</p><p>If a role the user does not belong to is specified as the role_name, it will result in an error.</p><h4 id="SQLStandardBasedHiveAuthorization-ShowRoles">Show Roles</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SHOW ROLES;]]></script>
</div></div><p>List all currently existing roles.</p><p>Only the <strong>admin</strong> role has privilege for this.</p><h4 id="SQLStandardBasedHiveAuthorization-GrantRole">Grant Role</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[GRANT role_name [, role_name] ...
TO principal_specification [, principal_specification] ... 
[ WITH ADMIN OPTION ];

principal_specification
  : USER user
  | ROLE role]]></script>
</div></div><p>Grant one or more roles to other roles or users.</p><p>If “WITH ADMIN OPTION” is specified, then the user gets privileges to grant the role to other users/roles.</p><p>If the grant statement ends up creating a cycling relationship between roles, the command will fail with an error.</p><h4 id="SQLStandardBasedHiveAuthorization-RevokeRole">Revoke Role</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[REVOKE [ADMIN OPTION FOR] role_name [, role_name] ...
FROM principal_specification [, principal_specification] ... ;

principal_specification
  : USER user
  | ROLE role]]></script>
</div></div><p>Revokes the membership of the roles from the user/roles in the FROM clause.</p><p>As of Hive 0.14.0, revoking just the ADMIN OPTION is possible with the use of REVOKE ADMIN OPTION FOR &lt;role&gt; (<a href="https://issues.apache.org/jira/browse/HIVE-6252" class="external-link" rel="nofollow">HIVE-6252</a>).</p><h4 id="SQLStandardBasedHiveAuthorization-ShowRoleGrant">Show Role Grant</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SHOW ROLE GRANT (USER|ROLE) principal_name;]]></script>
</div></div><p>where <code>principal_name</code> is the name of a user or role.</p><p>Lists all roles the given user or role has been granted.</p><p>Currently any user can run this command. But this is likely to change in future to allow users to see only their own role grants, and additional privileges would be needed to see role grants of other users.</p><h5 id="SQLStandardBasedHiveAuthorization-ExampleofShowRoleGrant">Example of Show Role Grant</h5><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[0: jdbc:hive2://localhost:10000&gt; GRANT role1 TO USER user1;
No rows affected (0.058 seconds)

0: jdbc:hive2://localhost:10000&gt; SHOW ROLE GRANT USER user1;
+---------+---------------+----------------+----------+
|  role   | grant_option  |   grant_time   | grantor  |
+---------+---------------+----------------+----------+
| public  | false         | 0              |          |
| role1   | false         | 1398284083000  | uadmin   |
+---------+---------------+----------------+----------+]]></script>
</div></div><h4 id="SQLStandardBasedHiveAuthorization-ShowPrincipals">Show Principals</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SHOW PRINCIPALS role_name;]]></script>
</div></div><p>Lists all roles and users who belong to this role.</p><p>Only the <strong>admin</strong> role has privilege for this.</p><h5 id="SQLStandardBasedHiveAuthorization-ExampleofShowPrincipals">Example of Show Principals</h5><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[0: jdbc:hive2://localhost:10000&gt; SHOW PRINCIPALS role1;
+-----------------+-----------------+---------------+----------+---------------+----------------+
| principal_name  | principal_type  | grant_option  | grantor  | grantor_type  |   grant_time   |
+-----------------+-----------------+---------------+----------+---------------+----------------+
| role2           | ROLE            | false         | uadmin   | USER          | 1398285926000  |
| role3           | ROLE            | true          | uadmin   | USER          | 1398285946000  |
| user1           | USER            | false         | uadmin   | USER          | 1398285977000  |
+-----------------+-----------------+---------------+----------+---------------+----------------+]]></script>
</div></div><h2 id="SQLStandardBasedHiveAuthorization-ManagingObjectPrivileges">Managing Object Privileges</h2><h3 id="SQLStandardBasedHiveAuthorization-ObjectPrivilegeCommands">Object Privilege Commands</h3><h4 id="SQLStandardBasedHiveAuthorization-Grant">Grant</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[GRANT
    priv_type [, priv_type ] ...
    ON table_or_view_name
    TO principal_specification [, principal_specification] ...
    [WITH GRANT OPTION];]]></script>
</div></div><h4 id="SQLStandardBasedHiveAuthorization-Revoke">Revoke</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[REVOKE [GRANT OPTION FOR]
    priv_type [, priv_type ] ...
    ON table_or_view_name
    FROM principal_specification [, principal_specification] ... ;

principal_specification
  : USER user
  | ROLE role
 
priv_type
  : INSERT | SELECT | UPDATE | DELETE | ALL]]></script>
</div></div><p>If a user is granted a privilege WITH GRANT OPTION on a table or view, then the user can also grant/revoke privileges of other users and roles on those objects<span style="line-height: 1.4285715;">. As of Hive 0.14.0, the grant option for a privilege can be removed while still keeping the privilege by using REVOKE GRANT OPTION FOR &lt;privilege&gt; (</span><a href="https://issues.apache.org/jira/browse/HIVE-7404" style="line-height: 1.4285715;" class="external-link" rel="nofollow">HIVE-7404</a><span style="line-height: 1.4285715;">).</span></p><p>Note that in case of the REVOKE statement, the DROP-BEHAVIOR option of CASCADE is not currently supported (which is in SQL standard). As a result, the revoke statement will not drop any dependent privileges. For details on CASCADE behavior, you can check the <a href="http://www.postgresql.org/docs/8.4/static/sql-revoke.html" class="external-link" rel="nofollow">Postgres revoke documentation</a>.</p><h4 id="SQLStandardBasedHiveAuthorization-ShowGrant">Show Grant</h4><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[SHOW GRANT [principal_name] ON (ALL| ([TABLE] table_or_view_name)]]></script>
</div></div><p>where <code>principal_name</code> is the name of a user or role.</p><p>Currently any user can run this command. But this is likely to change in the future to allow users to see only their own privileges, and additional privileges would be needed to see privileges of other users.</p><h3 id="SQLStandardBasedHiveAuthorization-ExamplesofManagingObjectPrivileges">Examples of Managing Object Privileges</h3><p>Find out the privileges user ashutosh has on table hivejiratable:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[0: jdbc:hive2://localhost:10000&gt; show grant user ashutosh on table hivejiratable;
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| database  |     table      | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |   grant_time   | grantor  |
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| default   | hivejiratable  |            |         | ashutosh        | USER            | DELETE     | false         | 1398303419000  | thejas   |
| default   | hivejiratable  |            |         | ashutosh        | USER            | SELECT     | false         | 1398303407000  | thejas   |
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+]]></script>
</div></div><p> </p><p>Find out the privileges user ashutosh has on all objects:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[0: jdbc:hive2://localhost:10000&gt; show grant user ashutosh on all;                               
+-----------+-------------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| database  |       table       | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |   grant_time   | grantor  |
+-----------+-------------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| default   | hivecontributors  |            |         | ashutosh        | USER            | DELETE     | false         | 1398303576000  | thejas   |
| default   | hivecontributors  |            |         | ashutosh        | USER            | INSERT     | false         | 1398303576000  | thejas   |
| default   | hivecontributors  |            |         | ashutosh        | USER            | SELECT     | false         | 1398303576000  | thejas   |
| default   | hivejiratable     |            |         | ashutosh        | USER            | DELETE     | false         | 1398303419000  | thejas   |
| default   | hivejiratable     |            |         | ashutosh        | USER            | SELECT     | false         | 1398303407000  | thejas   |
+-----------+-------------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+]]></script>
</div></div><p> </p><p>Find out the privileges all users have on table hivejiratable:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<script type="syntaxhighlighter" class="brush: text; gutter: false; theme: Default"><![CDATA[0: jdbc:hive2://localhost:10000&gt; show grant on table hivejiratable;
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| database  |     table      | partition  | column  | principal_name  | principal_type  | privilege  | grant_option  |   grant_time   | grantor  |
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+
| default   | hivejiratable  |            |         | ashutosh        | USER            | DELETE     | false         | 1398303419000  | thejas   |
| default   | hivejiratable  |            |         | ashutosh        | USER            | SELECT     | false         | 1398303407000  | thejas   |
| default   | hivejiratable  |            |         | navis           | USER            | INSERT     | false         | 1398303650000  | thejas   |
| default   | hivejiratable  |            |         | navis           | USER            | SELECT     | false         | 1398303650000  | thejas   |
| default   | hivejiratable  |            |         | public          | ROLE            | SELECT     | false         | 1398303481000  | thejas   |
| default   | hivejiratable  |            |         | thejas          | USER            | DELETE     | true          | 1398303380000  | thejas   |
| default   | hivejiratable  |            |         | thejas          | USER            | INSERT     | true          | 1398303380000  | thejas   |
| default   | hivejiratable  |            |         | thejas          | USER            | SELECT     | true          | 1398303380000  | thejas   |
| default   | hivejiratable  |            |         | thejas          | USER            | UPDATE     | true          | 1398303380000  | thejas   |
+-----------+----------------+------------+---------+-----------------+-----------------+------------+---------------+----------------+----------+]]></script>
</div></div><h2 id="SQLStandardBasedHiveAuthorization-PrivilegesRequiredforHiveOperations">Privileges Required for Hive Operations</h2><p><em>Codes</em></p><p>Y:  Privilege required.</p><p>Y + G:  Privilege &quot;WITH GRANT OPTION&quot; required.</p><div class="table-wrap"><table style="margin-left: 0.0px;" class="confluenceTable"><tbody><tr><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Action</div></th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Select</div></th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Insert</div></th><th colspan="1" class="confluenceTh">Update</th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Delete</div></th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Ownership</div></th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">Admin</div></th><th style="text-align: left;" class="confluenceTh"><div class="tablesorter-header-inner">URI Privilege (RWX Permission + Ownership)</div></th></tr><tr><td style="text-align: left;" class="confluenceTd">CREATE TABLE</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y (of database)</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y  (for create external table – the location)</td></tr><tr><td style="text-align: left;" class="confluenceTd">DROP TABLE</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td></tr><tr><td style="text-align: left;" class="confluenceTd">DESCRIBE TABLE</td><td style="text-align: left;" class="confluenceTd">Y</td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td></tr><tr><td style="text-align: left;" class="confluenceTd">SHOW PARTITIONS</td><td style="text-align: left;" class="confluenceTd">Y</td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td></tr><tr><td style="text-align: left;" class="confluenceTd">ALTER TABLE LOCATION</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y (for new location)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER PARTITION LOCATION</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (for new partition location)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER TABLE ADD PARTITION</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (for partition location)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd"><span>ALTER TABLE DROP PARTITION</span></td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER TABLE (all of them except the ones above)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">TRUNCATE TABLE</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE VIEW</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y + G</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER VIEW PROPERTIES</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER VIEW RENAME</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">DROP VIEW PROPERTIES</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td style="text-align: left;" class="confluenceTd">DROP VIEW</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd">Y</td><td style="text-align: left;" class="confluenceTd"> </td><td style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ANALYZE TABLE</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">SHOW COLUMNS</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">SHOW TABLE STATUS</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">SHOW TABLE PROPERTIES</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE TABLE AS SELECT</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (of input)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (of database)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE INDEX</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (of table)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">DROP INDEX</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER INDEX REBUILD</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER INDEX PROPERTIES</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">SELECT</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">INSERT</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Y (for OVERWRITE)</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">UPDATE</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" class="confluenceTd">DELETE</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd">Y</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">LOAD</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (output)</td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (output)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (input location)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">SHOW CREATE TABLE</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y+G</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE FUNCTION</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">DROP FUNCTION</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE MACRO</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">DROP MACRO</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">MSCK (metastore check)</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">ALTER DATABASE</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">CREATE DATABASE</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y (if custom location specified)</td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">EXPLAIN</td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr><tr><td colspan="1" style="text-align: left;" class="confluenceTd">DROP DATABASE</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd">Y</td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td><td colspan="1" style="text-align: left;" class="confluenceTd"> </td></tr></tbody></table></div><h2 id="SQLStandardBasedHiveAuthorization-Configuration">Configuration</h2><h3 id="SQLStandardBasedHiveAuthorization-ForHive0.13.x">For Hive 0.13.x</h3><p><strong>Set the following in hive-site.xml:</strong></p><ul><li>hive.server2.enable.doAs to false.</li><li>hive.users.in.admin.role to the list of comma-separated users who need to be added to <strong>admin</strong> role. Note that a user who belongs to the <strong>admin</strong> role needs to run the &quot;<code><a href="SQL+Standard+Based+Hive+Authorization#SQLStandardBasedHiveAuthorization-SetRole">set role</a></code>&quot; command before getting the privileges of the <strong>admin</strong> role, as this role is not in current roles by default.<br /><br /></li></ul><p><strong>Start HiveServer2 with the following additional command-line options:</strong></p><ul><li>-hiveconf hive.security.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdHiveAuthorizerFactory</li></ul><div class="user-content-block"><ul><li>-hiveconf hive.security.authorization.enabled=true</li><li>-hiveconf hive.security.authenticator.manager=org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator</li><li>-hiveconf hive.metastore.uris=' '</li></ul></div><h3 id="SQLStandardBasedHiveAuthorization-ForHive0.14andnewer:">For Hive 0.14 and newer:</h3><p><strong>Set the following in hive-site.xml:</strong></p><ul><li><strong>hive.server2.enable.doAs</strong> to false.</li><li><strong>hive.users.in.admin.role</strong> to the list of comma-separated users who need to be added to <strong>admin</strong> role. Note that a user who belongs to the <strong>admin</strong> role needs to run the &quot;<code><a href="SQL+Standard+Based+Hive+Authorization#SQLStandardBasedHiveAuthorization-SetRole">set role</a></code>&quot; command before getting the privileges of the <strong>admin</strong> role, as this role is not in current roles by default.</li><li><p>Add org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly to <strong>hive.security.metastore.authorization.manager</strong>. (It takes a comma separated list, so you can add it along with StorageBasedAuthorization parameter, if you want to enable that as well).<br />This setting disallows any of the authorization api calls to be invoked in a remote metastore. HiveServer2 can be configured to use embedded metastore, and that will allow it to invoke metastore authorization api. Hive cli and any other remote metastore users would be denied authorization when they try to make authorization api calls. This restricts the authorization api to privileged HiveServer2 process. You should also ensure that the metastore rdbms access is restricted to the metastore server and hiverserver2.</p></li><li><p><strong>hive.security.authorization.manager</strong> to org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdConfOnlyAuthorizerFactory. This will ensure that any table or views created by hive-cli have default privileges granted for the owner.</p></li></ul><p><strong>Set the following in hiveserver2-site.xml:</strong></p><ul><li>-hiveconf hive.security.authorization.manager=org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdHiveAuthorizerFactory</li></ul><div class="user-content-block"><ul><li>-hiveconf hive.security.authorization.enabled=true</li><li>-hiveconf hive.security.authenticator.manager=org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator</li><li>-hiveconf hive.metastore.uris=' '</li></ul></div><h2 id="SQLStandardBasedHiveAuthorization-KnownIssues">Known Issues</h2><h3 id="SQLStandardBasedHiveAuthorization-Hive0.13">Hive 0.13</h3><p><a href="https://issues.apache.org/jira/browse/HIVE-6985" class="external-link" rel="nofollow">HIVE-6985</a> – SQL std auth - privileges grants to public role not being honored</p><p><span style="color: rgb(34,34,34);"><a href="https://issues.apache.org/jira/browse/HIVE-6919" class="external-link" rel="nofollow">HIVE-6919</a> – <span style="color: rgb(34,34,34);">Hive sql std auth select query fails on partitioned tables</span></span></p><p><span style="color: rgb(34,34,34);"><span style="color: rgb(34,34,34);"><span><a href="https://issues.apache.org/jira/browse/HIVE-6921" class="external-link" rel="nofollow">HIVE-6921</a> – <span>Index creation fails with SQL std auth turned on</span></span></span></span></p><p><span><a href="https://issues.apache.org/jira/browse/HIVE-6957" class="external-link" rel="nofollow">HIVE-6957</a> – <span>SQL authorization does not work with HS2 binary mode and Kerberos auth</span></span></p><p><span style="color: rgb(34,34,34);"><a href="https://cwiki.apache.org/confluence/download/attachments/40509928/hivecve_signed.txt?version=1&amp;modificationDate=1402682751000&amp;api=v2" data-linked-resource-id="42696874" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="hivecve_signed.txt" data-nice-type="Text File" data-linked-resource-content-type="text/plain" data-linked-resource-container-id="40509928" data-linked-resource-container-version="64">CVE-2014-0228</a><span style="color: rgb(34,34,34);"> </span> - Export/Import statement not authorized. </span></p><h3 id="SQLStandardBasedHiveAuthorization-Hive0.13.1">Hive 0.13.1</h3><p><span style="color: rgb(34,34,34);">The known issues noted above under Hive 0.13.0 have been fixed in 0.13.1 release.</span></p><h2 id="SQLStandardBasedHiveAuthorization-References"><span style="font-size: 20.0px;line-height: 1.5;">References</span></h2><p>For information on the SQL standard for security see:</p><ul><li>ISO 9075 Part 1 Framework sections 4.2.6 (Roles), 4.6.11 (Privileges)</li><li>ISO 9075 Part 2 Foundation sections 4.35 (Basic security model) and 12 (Access control)</li></ul><h2 id="SQLStandardBasedHiveAuthorization-Troubleshooting">Troubleshooting</h2><p style="margin-left: 30.0px;"><em><strong>Problem:</strong></em>  My user name is in hive.users.in.admin.role in hive-site.xml, but I still get the error that user is not an <strong>admin</strong>. What could be wrong?</p><p style="margin-left: 60.0px;"><em><strong>Do This:</strong></em>  Ensure that you have restarted HiveServer2 after a configuration change and that you have used the HiveServer2 command line options as described in <a href="SQL+Standard+Based+Hive+Authorization#SQLStandardBasedHiveAuthorization-Configuration">Configuration</a> above.</p><p style="margin-left: 60.0px;"><em><strong>Do This:</strong></em>  Ensure that you have run a '<code><a href="SQL+Standard+Based+Hive+Authorization#SQLStandardBasedHiveAuthorization-SetRole">set role</a> admin;</code>' command to get the <strong>admin</strong> role.</p>

                
        
    
        </div>

        <!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/">
         <rdf:Description
    rdf:about="https://cwiki.apache.org/confluence/display/Hive/SQL+Standard+Based+Hive+Authorization"
    dc:identifier="https://cwiki.apache.org/confluence/display/Hive/SQL+Standard+Based+Hive+Authorization"
    dc:title="SQL Standard Based Hive Authorization"
    trackback:ping="https://cwiki.apache.org/confluence/rpc/trackback/40509928"/>
</rdf:RDF>
-->

                        
    



<div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="40509928" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right ">
            <li class="no-labels-message">
            No labels
        </li>
            </ul>

    </div>
</div>
</div>
        
		
            




            
    








                        
    
<div id="comments-section" class="pageSection group">
        
    



</div>


                
    
            
</div>


    




    
    

    
    
    


    
<div id="space-tools-web-items" class="hidden">
                <div data-label="Overview" data-href="/confluence/spaces/viewspacesummary.action?key=Hive">Overview</div>
            <div data-label="Content Tools" data-href="/confluence/pages/reorderpages.action?key=Hive">Content Tools</div>
            <div data-label="Add-ons" data-href="/confluence/spaces/snippeterrors.action?key=Hive">Add-ons</div>
    </div>




    </div><!-- \#main -->
        
    
        
            
            

<div id="footer" role="contentinfo">
    <section class="footer-body">

                                                            <p class="license license-opensource">
                    Powered by a free <b>Atlassian Confluence Open Source Project License</b> granted to Apache Software Foundation. <a href="http://www.atlassian.com/c/conf/11461">Evaluate Confluence today</a>.<br>
                </p>
                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link">Atlassian Confluence</a> <span id='footer-build-information'>5.8.4</span>, <a href="http://www.atlassian.com/software/confluence/overview/team-collaboration-software?utm_source=confluence-footer" class="hover-footer-link">Team Collaboration Software</a></li>
            <li class="print-only">Printed by Atlassian Confluence 5.8.4, Team Collaboration Software.</li>
            <li class="noprint"><a href="https://jira.atlassian.com/browse/CONF" class="hover-footer-link">Report a bug</a></li>
            <li class="noprint"><a href="http://www.atlassian.com/about/connected.jsp?s_kwcid=Confluence-stayintouch" class="hover-footer-link">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>

                    
        
    </section>
</div>

    
</div>

</div><!-- \#full-height-container -->
</div><!-- \#page -->
</body>
</html>
